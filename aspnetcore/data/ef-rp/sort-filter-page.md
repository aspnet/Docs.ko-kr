---
title: 3부. ASP.NET Core에서 EF Core를 사용한 Razor Pages - 정렬, 필터, 페이징
author: rick-anderson
description: Razor Pages 및 Entity Framework 자습서 시리즈의 3부입니다.
ms.author: riande
ms.custom: mvc
ms.date: 07/22/2019
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: data/ef-rp/sort-filter-page
ms.openlocfilehash: 51a1e2a90259898262ac655b7a0e8a55d766f0c7
ms.sourcegitcommit: 3593c4efa707edeaaceffbfa544f99f41fc62535
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/04/2021
ms.locfileid: "93061043"
---
# <a name="part-3-no-locrazor-pages-with-ef-core-in-aspnet-core---sort-filter-paging"></a><span data-ttu-id="5950f-103">3부. ASP.NET Core에서 EF Core를 사용한 Razor Pages - 정렬, 필터, 페이징</span><span class="sxs-lookup"><span data-stu-id="5950f-103">Part 3, Razor Pages with EF Core in ASP.NET Core - Sort, Filter, Paging</span></span>

<span data-ttu-id="5950f-104">작성자: [Tom Dykstra](https://github.com/tdykstra), [Rick Anderson](https://twitter.com/RickAndMSFT) 및 [Jon P Smith](https://twitter.com/thereformedprog)</span><span class="sxs-lookup"><span data-stu-id="5950f-104">By [Tom Dykstra](https://github.com/tdykstra), [Rick Anderson](https://twitter.com/RickAndMSFT), and [Jon P Smith](https://twitter.com/thereformedprog)</span></span>

[!INCLUDE [about the series](~/includes/RP-EF/intro.md)]

::: moniker range=">= aspnetcore-3.0"

<span data-ttu-id="5950f-105">이 자습서에서는 학생 페이지에 정렬, 필터링 및 페이징 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-105">This tutorial adds sorting, filtering, and paging functionality to the Students pages.</span></span>

<span data-ttu-id="5950f-106">다음 그림은 완료된 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-106">The following illustration shows a completed page.</span></span> <span data-ttu-id="5950f-107">열 제목은 열을 정렬하는 클릭할 수 있는 링크입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-107">The column headings are clickable links to sort the column.</span></span> <span data-ttu-id="5950f-108">열 제목을 반복적으로 클릭하여 오름차순 및 내림차순으로 정렬 순서를 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-108">Click a column heading repeatedly to switch between ascending and descending sort order.</span></span>

![학생 인덱스 페이지](sort-filter-page/_static/paging30.png)

## <a name="add-sorting"></a><span data-ttu-id="5950f-110">정렬 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-110">Add sorting</span></span>

<span data-ttu-id="5950f-111">*Pages/Students/Index.cshtml.cs* 에 있는 코드를 다음 코드로 바꿔서 정렬을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-111">Replace the code in *Pages/Students/Index.cshtml.cs* with the following code to add sorting.</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_All)]

<span data-ttu-id="5950f-112">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="5950f-112">The preceding code:</span></span>

* <span data-ttu-id="5950f-113">`using System;`을 추가해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-113">Requires adding `using System;`.</span></span>
* <span data-ttu-id="5950f-114">정렬 매개 변수를 포함할 속성을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-114">Adds properties to contain the sorting parameters.</span></span>
* <span data-ttu-id="5950f-115">`Student` 속성의 이름을 `Students`로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-115">Changes the name of the `Student` property to `Students`.</span></span>
* <span data-ttu-id="5950f-116">`OnGetAsync` 메서드의 코드를 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-116">Replaces the code in the `OnGetAsync` method.</span></span>

<span data-ttu-id="5950f-117">`OnGetAsync` 메서드는 URL의 쿼리 문자열에서 `sortOrder` 매개 변수를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-117">The `OnGetAsync` method receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="5950f-118">URL 및 쿼리 문자열은 [앵커 태그 도우미](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper)에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-118">The URL and query string is generated by the [Anchor Tag Helper](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper).</span></span>

<span data-ttu-id="5950f-119">`sortOrder` 매개 변수는 `Name` 또는 `Date`입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-119">The `sortOrder` parameter is either `Name` or `Date`.</span></span> <span data-ttu-id="5950f-120">내림차순을 지정하려면 필요에 따라 `sortOrder` 매개 변수 뒤에 `_desc`를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-120">The `sortOrder` parameter is optionally followed by `_desc` to specify descending order.</span></span> <span data-ttu-id="5950f-121">기본 정렬 순서는 오름차순입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-121">The default sort order is ascending.</span></span>

<span data-ttu-id="5950f-122">인덱스 페이지가 **학생** 링크에서 요청되는 경우 쿼리 문자열이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-122">When the Index page is requested from the **Students** link, there's no query string.</span></span> <span data-ttu-id="5950f-123">학생은 성 기준 오름차순으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-123">The students are displayed in ascending order by last name.</span></span> <span data-ttu-id="5950f-124">`switch` 문에서는 성 기준 오름차순이 `default`입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-124">Ascending order by last name is the `default` in the `switch` statement.</span></span> <span data-ttu-id="5950f-125">사용자가 열 제목 링크를 클릭하면 적절한 `sortOrder` 값이 쿼리 문자열 값에 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-125">When the user clicks a column heading link, the appropriate `sortOrder` value is provided in the query string value.</span></span>

<span data-ttu-id="5950f-126">Razor Page에서 열 제목 하이퍼링크를 적절한 쿼리 문자열 값으로 구성하기 위해 `NameSort` 및 `DateSort`가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-126">`NameSort` and `DateSort` are used by the Razor Page to configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_Ternary)]

<span data-ttu-id="5950f-127">이 코드는 C# [조건 연산자 ?:](/dotnet/csharp/language-reference/operators/conditional-operator)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-127">The code uses the C# [conditional operator ?:](/dotnet/csharp/language-reference/operators/conditional-operator).</span></span> <span data-ttu-id="5950f-128">`?:` 연산자는 피연산자 3개를 사용하는 3개로 구성된 연산자입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-128">The `?:` operator is a ternary operator, it takes three operands.</span></span> <span data-ttu-id="5950f-129">첫 번째 줄은 `sortOrder`가 null이거나 비어 있는 경우 `NameSort`가 `name_desc`로 설정되도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-129">The first line specifies that when `sortOrder` is null or empty, `NameSort` is set to `name_desc`.</span></span> <span data-ttu-id="5950f-130">`sortOrder`가 null이 아니거나 비어 있지 않은 경우 `NameSort`는 빈 문자열로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-130">If `sortOrder` is \**_not_* _ null or empty, `NameSort` is set to an empty string.</span></span>

<span data-ttu-id="5950f-131">이러한 두 명령문을 사용하면 페이지에서 다음과 같이 열 제목 하이퍼링크를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-131">These two statements enable the page to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="5950f-132">현재 정렬 순서</span><span class="sxs-lookup"><span data-stu-id="5950f-132">Current sort order</span></span>   | <span data-ttu-id="5950f-133">성 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="5950f-133">Last Name Hyperlink</span></span> | <span data-ttu-id="5950f-134">날짜 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="5950f-134">Date Hyperlink</span></span> |
|:--------------------:|:-------------------:|:--------------:|
| <span data-ttu-id="5950f-135">성 오름차순</span><span class="sxs-lookup"><span data-stu-id="5950f-135">Last Name ascending</span></span>  | <span data-ttu-id="5950f-136">descending</span><span class="sxs-lookup"><span data-stu-id="5950f-136">descending</span></span>          | <span data-ttu-id="5950f-137">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-137">ascending</span></span>      |
| <span data-ttu-id="5950f-138">성 내림차순</span><span class="sxs-lookup"><span data-stu-id="5950f-138">Last Name descending</span></span> | <span data-ttu-id="5950f-139">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-139">ascending</span></span>           | <span data-ttu-id="5950f-140">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-140">ascending</span></span>      |
| <span data-ttu-id="5950f-141">날짜 오름차순</span><span class="sxs-lookup"><span data-stu-id="5950f-141">Date ascending</span></span>       | <span data-ttu-id="5950f-142">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-142">ascending</span></span>           | <span data-ttu-id="5950f-143">descending</span><span class="sxs-lookup"><span data-stu-id="5950f-143">descending</span></span>     |
| <span data-ttu-id="5950f-144">날짜 내림차순</span><span class="sxs-lookup"><span data-stu-id="5950f-144">Date descending</span></span>      | <span data-ttu-id="5950f-145">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-145">ascending</span></span>           | <span data-ttu-id="5950f-146">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-146">ascending</span></span>      |

<span data-ttu-id="5950f-147">메서드는 LINQ to Entities를 사용하여 정렬할 기준이 되는 열을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-147">The method uses LINQ to Entities to specify the column to sort by.</span></span> <span data-ttu-id="5950f-148">코드는 `IQueryable<Student>`를 switch 문 앞에서 초기화하고 switch 문에서 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-148">The code initializes an `IQueryable<Student>` before the switch statement, and modifies it in the switch statement:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_IQueryable)]

<span data-ttu-id="5950f-149">`IQueryable`을 만들거나 수정하는 경우 데이터베이스에 쿼리가 전송되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-149">When an `IQueryable` is created or modified, no query is sent to the database.</span></span> <span data-ttu-id="5950f-150">쿼리는 `IQueryable` 개체가 컬렉션으로 변환될 때까지 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-150">The query isn't executed until the `IQueryable` object is converted into a collection.</span></span> <span data-ttu-id="5950f-151">`ToListAsync`와 같은 메서드를 호출하면 `IQueryable`이 컬렉션으로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-151">`IQueryable` are converted to a collection by calling a method such as `ToListAsync`.</span></span> <span data-ttu-id="5950f-152">따라서 `IQueryable` 코드는 다음 명령문까지 실행되지 않는 단일 쿼리가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-152">Therefore, the `IQueryable` code results in a single query that's not executed until the following statement:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml.cs?name=snippet_SortOnlyRtn)]

<span data-ttu-id="5950f-153">`OnGetAsync`는 많은 수의 정렬 가능한 열이 포함된 자세한 정보를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-153">`OnGetAsync` could get verbose with a large number of sortable columns.</span></span> <span data-ttu-id="5950f-154">이 기능을 코딩하는 다른 방법에 대한 자세한 내용은 이 자습서 시리즈의 MVC 버전에서 [동적 LINQ를 사용하여 코드 단순화](xref:data/ef-mvc/advanced#dynamic-linq)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5950f-154">For information about an alternative way to code this functionality, see [Use dynamic LINQ to simplify code](xref:data/ef-mvc/advanced#dynamic-linq) in the MVC version of this tutorial series.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-page"></a><span data-ttu-id="5950f-155">학생 인덱스 페이지에 열 제목 하이퍼링크 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-155">Add column heading hyperlinks to the Student Index page</span></span>

<span data-ttu-id="5950f-156">_Students/Index.cshtml\*의 코드를 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-156">Replace the code in _Students/Index.cshtml\*, with the following code.</span></span> <span data-ttu-id="5950f-157">변경 내용은 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-157">The changes are highlighted.</span></span>

[!code-cshtml[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index1.cshtml?highlight=5,8,17-19,22,25-27,33)]

<span data-ttu-id="5950f-158">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="5950f-158">The preceding code:</span></span>

* <span data-ttu-id="5950f-159">하이퍼링크를 `LastName` 및 `EnrollmentDate` 열 머리글에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-159">Adds hyperlinks to the `LastName` and `EnrollmentDate` column headings.</span></span>
* <span data-ttu-id="5950f-160">`NameSort` 및 `DateSort`의 정보를 사용하여 현재 정렬 순서 값으로 하이퍼링크를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-160">Uses the information in `NameSort` and `DateSort` to set up hyperlinks with the current sort order values.</span></span>
* <span data-ttu-id="5950f-161">페이지 제목을 인덱스에서 학생으로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-161">Changes the page heading from Index to Students.</span></span>
* <span data-ttu-id="5950f-162">`Model.Student`를 `Model.Students`로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-162">Changes `Model.Student` to `Model.Students`.</span></span>

<span data-ttu-id="5950f-163">정렬이 작동하는지 확인하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-163">To verify that sorting works:</span></span>

* <span data-ttu-id="5950f-164">앱을 실행하고 **학생** 탭을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-164">Run the app and select the **Students** tab.</span></span>
* <span data-ttu-id="5950f-165">열 제목을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-165">Click the column headings.</span></span>

## <a name="add-filtering"></a><span data-ttu-id="5950f-166">필터링 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-166">Add filtering</span></span>

<span data-ttu-id="5950f-167">학생 인덱스 페이지에 필터링을 추가하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-167">To add filtering to the Students Index page:</span></span>

* <span data-ttu-id="5950f-168">텍스트 상자 및 전송 단추가 Razor 페이지에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-168">A text box and a submit button is added to the Razor Page.</span></span> <span data-ttu-id="5950f-169">텍스트 상자는 첫 번째 또는 마지막 이름에 검색 문자열을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-169">The text box supplies a search string on the first or last name.</span></span>
* <span data-ttu-id="5950f-170">페이지 모델이 텍스트 상자 값을 사용하도록 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-170">The page model is updated to use the text box value.</span></span>

### <a name="update-the-ongetasync-method"></a><span data-ttu-id="5950f-171">OnGetAsync 메서드 업데이트</span><span class="sxs-lookup"><span data-stu-id="5950f-171">Update the OnGetAsync method</span></span>

<span data-ttu-id="5950f-172">*Students/Index.cshtml.cs* 에 있는 코드를 다음 코드로 바꿔서 필터링을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-172">Replace the code in *Students/Index.cshtml.cs* with the following code to add filtering:</span></span>

[!code-csharp[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index2.cshtml.cs?name=snippet_All&highlight=17,22,26-30)]

<span data-ttu-id="5950f-173">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="5950f-173">The preceding code:</span></span>

* <span data-ttu-id="5950f-174">`searchString` 매개 변수를 `OnGetAsync` 메서드에 추가하고 매개 변수 값을 `CurrentFilter` 속성에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-174">Adds the `searchString` parameter to the `OnGetAsync` method, and saves the parameter value in the `CurrentFilter` property.</span></span> <span data-ttu-id="5950f-175">다음 섹션에서 추가되는 텍스트 상자에서 검색 문자열 값이 수신됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-175">The search string value is received from a text box that's added in the next section.</span></span>
* <span data-ttu-id="5950f-176">`Where` 절을 LINQ 문에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-176">Adds to the LINQ statement a `Where` clause.</span></span> <span data-ttu-id="5950f-177">`Where` 절은 이름 또는 성에 검색 문자열이 포함된 학생만 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-177">The `Where` clause selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="5950f-178">LINQ 문은 검색할 값이 있는 경우에만 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-178">The LINQ statement is executed only if there's a value to search for.</span></span>

### <a name="iqueryable-vs-ienumerable"></a><span data-ttu-id="5950f-179">IQueryable 및 IEnumerable</span><span class="sxs-lookup"><span data-stu-id="5950f-179">IQueryable vs. IEnumerable</span></span>

<span data-ttu-id="5950f-180">이 코드는 `IQueryable` 개체에서 <xref:System.Linq.Queryable.Where%2A> 메서드를 호출하고, 필터는 서버에서 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-180">The code calls the <xref:System.Linq.Queryable.Where%2A> method on an `IQueryable` object, and the filter is processed on the server.</span></span> <span data-ttu-id="5950f-181">일부 시나리오에서 앱은 메모리 내 컬렉션에서 확장 메서드로 `Where` 메서드를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-181">In some scenarios, the app might be calling the `Where` method as an extension method on an in-memory collection.</span></span> <span data-ttu-id="5950f-182">예를 들어 `_context.Students`가 EF Core `DbSet`에서 `IEnumerable` 컬렉션을 반환하는 리포지토리 메서드로 변경되었다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-182">For example, suppose `_context.Students` changes from EF Core `DbSet` to a repository method that returns an `IEnumerable` collection.</span></span> <span data-ttu-id="5950f-183">결과는 일반적으로 동일하지만 경우에 따라 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-183">The result would normally be the same but in some cases may be different.</span></span>

<span data-ttu-id="5950f-184">예를 들어 `Contains`의 .NET Framework 구현은 기본적으로 대/소문자 구분 비교를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-184">For example, the .NET Framework implementation of `Contains` performs a case-sensitive comparison by default.</span></span> <span data-ttu-id="5950f-185">SQL Server에서 `Contains` 대/소문자 구분은 SQL Server 인스턴스의 컬렉션 설정에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-185">In SQL Server, `Contains` case-sensitivity is determined by the collation setting of the SQL Server instance.</span></span> <span data-ttu-id="5950f-186">SQL Server는 기본적으로 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-186">SQL Server defaults to case-insensitive.</span></span> <span data-ttu-id="5950f-187">SQLite는 기본적으로 대/소문자를 구분합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-187">SQLite defaults to case-sensitive.</span></span> <span data-ttu-id="5950f-188">`ToUpper`는 테스트가 명시적으로 대/소문자를 구분하지 않도록 하기 위해 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-188">`ToUpper` could be called to make the test explicitly case-insensitive:</span></span>

```csharp
Where(s => s.LastName.ToUpper().Contains(searchString.ToUpper())`
```

<span data-ttu-id="5950f-189">앞의 코드는 `Where` 메서드가 `IEnumerable`에서 호출되거나 SQLite에서 실행되는 경우에도 필터가 대/소문자를 구분하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-189">The preceding code would ensure that the filter is case-insensitive even if the `Where` method is called on an `IEnumerable` or runs on SQLite.</span></span>

<span data-ttu-id="5950f-190">`Contains`가 `IEnumerable` 컬렉션에서 호출된 경우 .NET Core 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-190">When `Contains` is called on an `IEnumerable` collection, the .NET Core implementation is used.</span></span> <span data-ttu-id="5950f-191">`Contains`가 `IQueryable` 개체에서 호출된 경우 데이터베이스 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-191">When `Contains` is called on an `IQueryable` object, the database implementation is used.</span></span>

<span data-ttu-id="5950f-192">성능상 이유로, 일반적으로 `IQueryable`에 대해 `Contains`를 호출하는 것이 더 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-192">Calling `Contains` on an `IQueryable` is usually preferable for performance reasons.</span></span> <span data-ttu-id="5950f-193">`IQueryable`을 사용하면 필터링이 데이터베이스 서버에서 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-193">With `IQueryable`, the filtering is done by the database server.</span></span> <span data-ttu-id="5950f-194">`IEnumerable`이 먼저 만들어진 경우에는 먼저 데이터베이스 서버에서 모든 행이 반환되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-194">If an `IEnumerable` is created first, all the rows have to be returned from the database server.</span></span>

<span data-ttu-id="5950f-195">`ToUpper` 호출에 대한 성능 저하가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-195">There's a performance penalty for calling `ToUpper`.</span></span> <span data-ttu-id="5950f-196">`ToUpper` 코드는 TSQL SELECT 문의 WHERE 절에 함수를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-196">The `ToUpper` code adds a function in the WHERE clause of the TSQL SELECT statement.</span></span> <span data-ttu-id="5950f-197">추가된 함수는 최적화 프로그램이 인덱스를 사용하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-197">The added function prevents the optimizer from using an index.</span></span> <span data-ttu-id="5950f-198">SQL은 대/소문자를 구분하지 않도록 설치되어 있으므로 필요하지 않은 경우 `ToUpper` 호출을 피하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-198">Given that SQL is installed as case-insensitive, it's best to avoid the `ToUpper` call when it's not needed.</span></span>

<span data-ttu-id="5950f-199">자세한 내용은 [SQLite 공급자를 사용하여 대/소문자를 구분하지 않는 쿼리를 사용하는 방법](https://github.com/aspnet/EntityFrameworkCore/issues/11414)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5950f-199">For more information, see [How to use case-insensitive query with Sqlite provider](https://github.com/aspnet/EntityFrameworkCore/issues/11414).</span></span>

### <a name="update-the-no-locrazor-page"></a><span data-ttu-id="5950f-200">Razor 페이지 업데이트</span><span class="sxs-lookup"><span data-stu-id="5950f-200">Update the Razor page</span></span>

<span data-ttu-id="5950f-201">*Pages/Students/Index.cshtml* 의 코드를 바꿔서 **검색** 단추를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-201">Replace the code in *Pages/Students/Index.cshtml* to add a **Search** button.</span></span>

[!code-cshtml[Main](intro/samples/cu30snapshots/3-sorting/Pages/Students/Index2.cshtml?highlight=14-23)]

<span data-ttu-id="5950f-202">위의 코드는 `<form>` [태그 도우미](xref:mvc/views/tag-helpers/intro)를 사용하여 검색 텍스트 상자와 단추를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-202">The preceding code uses the `<form>` [tag helper](xref:mvc/views/tag-helpers/intro) to add the search text box and button.</span></span> <span data-ttu-id="5950f-203">기본적으로 `<form>` 태그 도우미는 POST로 양식 데이터를 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-203">By default, the `<form>` tag helper submits form data with a POST.</span></span> <span data-ttu-id="5950f-204">POST를 사용하면 매개 변수가 URL에 없는 HTTP 메시지 본문에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-204">With POST, the parameters are passed in the HTTP message body and not in the URL.</span></span> <span data-ttu-id="5950f-205">HTTP GET을 사용하는 경우 양식 데이터가 URL에 쿼리 문자열로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-205">When HTTP GET is used, the form data is passed in the URL as query strings.</span></span> <span data-ttu-id="5950f-206">사용자는 쿼리 문자열로 데이터를 전달하여 URL을 책갈피로 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-206">Passing the data with query strings enables users to bookmark the URL.</span></span> <span data-ttu-id="5950f-207">[W3C 지침](https://www.w3.org/2001/tag/doc/whenToUseGet.html)에 따라 작업이 업데이트되지 않을 때 GET을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-207">The [W3C guidelines](https://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that GET should be used when the action doesn't result in an update.</span></span>

<span data-ttu-id="5950f-208">앱을 테스트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-208">Test the app:</span></span>

* <span data-ttu-id="5950f-209">**학생** 탭을 선택하고 검색 문자열을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-209">Select the **Students** tab and enter a search string.</span></span> <span data-ttu-id="5950f-210">SQLite를 사용하는 경우 필터는 앞에 표시된 선택적 `ToUpper` 코드를 구현한 경우에만 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-210">If you're using SQLite, the filter is case-insensitive only if you implemented the optional `ToUpper` code shown earlier.</span></span>

* <span data-ttu-id="5950f-211">**검색** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-211">Select **Search**.</span></span>

<span data-ttu-id="5950f-212">URL에 검색 문자열이 포함되어 있음을 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="5950f-212">Notice that the URL contains the search string.</span></span> <span data-ttu-id="5950f-213">예를 들어:</span><span class="sxs-lookup"><span data-stu-id="5950f-213">For example:</span></span>

```browser-address-bar
https://localhost:5001/Students?SearchString=an
```

<span data-ttu-id="5950f-214">페이지가 책갈피로 표시된 경우 책갈피에는 페이지에 대한 URL 및 `SearchString` 쿼리 문자열이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-214">If the page is bookmarked, the bookmark contains the URL to the page and the `SearchString` query string.</span></span> <span data-ttu-id="5950f-215">`form` 태그의 `method="get"`으로 인해 쿼리 문자열이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-215">The `method="get"` in the `form` tag is what caused the query string to be generated.</span></span>

<span data-ttu-id="5950f-216">현재 열 제목 정렬 링크를 선택하면 **검색** 상자에서 필터 값이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-216">Currently, when a column heading sort link is selected, the filter value from the **Search** box is lost.</span></span> <span data-ttu-id="5950f-217">손실된 필터 값은 다음 섹션에서 수정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-217">The lost filter value is fixed in the next section.</span></span>

## <a name="add-paging"></a><span data-ttu-id="5950f-218">페이징 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-218">Add paging</span></span>

<span data-ttu-id="5950f-219">이 섹션에서는 페이징을 지원하기 위해 `PaginatedList` 클래스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-219">In this section, a `PaginatedList` class is created to support paging.</span></span> <span data-ttu-id="5950f-220">`PaginatedList` 클래스는 `Skip` 및 `Take` 문을 사용하여 테이블의 모든 행을 검색하는 대신 서버에 있는 데이터를 필터링합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-220">The `PaginatedList` class uses `Skip` and `Take` statements to filter data on the server instead of retrieving all rows of the table.</span></span> <span data-ttu-id="5950f-221">다음 그림에는 페이징 단추가 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-221">The following illustration shows the paging buttons.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging30.png)

### <a name="create-the-paginatedlist-class"></a><span data-ttu-id="5950f-223">PaginatedList 클래스 만들기</span><span class="sxs-lookup"><span data-stu-id="5950f-223">Create the PaginatedList class</span></span>

<span data-ttu-id="5950f-224">프로젝트 폴더에서 다음 코드로 `PaginatedList.cs`를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-224">In the project folder, create `PaginatedList.cs` with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu30/PaginatedList.cs)]

<span data-ttu-id="5950f-225">이전 코드에서 `CreateAsync` 메서드는 페이지 크기 및 페이지 번호를 사용하고 적절한 `Skip` 및 `Take` 문을 `IQueryable`에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-225">The `CreateAsync` method in the preceding code takes page size and page number and applies the appropriate `Skip` and `Take` statements to the `IQueryable`.</span></span> <span data-ttu-id="5950f-226">`IQueryable`에서 `ToListAsync`를 호출하면 요청된 페이지만 포함하는 목록을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-226">When `ToListAsync` is called on the `IQueryable`, it returns a List containing only the requested page.</span></span> <span data-ttu-id="5950f-227">**이전** 및 **다음** 페이징 단추를 사용 또는 사용하지 않도록 설정하는 데 `HasPreviousPage` 및 `HasNextPage` 속성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-227">The properties `HasPreviousPage` and `HasNextPage` are used to enable or disable **Previous** and **Next** paging buttons.</span></span>

<span data-ttu-id="5950f-228">`CreateAsync` 메서드는 `PaginatedList<T>`를 만드는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-228">The `CreateAsync` method is used to create the `PaginatedList<T>`.</span></span> <span data-ttu-id="5950f-229">생성자는 `PaginatedList<T>` 개체를 만들 수 없고 비동기 코드를 실행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-229">A constructor can't create the `PaginatedList<T>` object; constructors can't run asynchronous code.</span></span>

### <a name="add-paging-to-the-pagemodel-class"></a><span data-ttu-id="5950f-230">PageModel 클래스에 페이징 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-230">Add paging to the PageModel class</span></span>

<span data-ttu-id="5950f-231">*Students/Index.cshtml.cs* 의 코드를 바꿔서 페이징을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-231">Replace the code in *Students/Index.cshtml.cs* to add paging.</span></span>

[!code-csharp[Main](intro/samples/cu30/Pages/Students/Index.cshtml.cs?name=snippet_All&highlight=15-20,23-30,57-59)]

<span data-ttu-id="5950f-232">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="5950f-232">The preceding code:</span></span>

* <span data-ttu-id="5950f-233">`Students` 속성의 형식을 `IList<Student>`에서 `PaginatedList<Student>`로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-233">Changes the type of the `Students` property from `IList<Student>` to `PaginatedList<Student>`.</span></span>
* <span data-ttu-id="5950f-234">페이지 인덱스, 현재 `sortOrder` 및 `currentFilter`를 `OnGetAsync` 메서드 시그니처에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-234">Adds the page index, the current `sortOrder`, and the `currentFilter` to the `OnGetAsync` method signature.</span></span>
* <span data-ttu-id="5950f-235">`CurrentSort` 속성에 정렬 순서를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-235">Saves the sort order in the `CurrentSort` property.</span></span>
* <span data-ttu-id="5950f-236">새 검색 문자열이 있는 경우 페이지 인덱스를 1로 다시 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-236">Resets page index to 1 when there's a new search string.</span></span>
* <span data-ttu-id="5950f-237">`PaginatedList` 클래스를 사용하여 Student 엔터티를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-237">Uses the `PaginatedList` class to get Student entities.</span></span>
* <span data-ttu-id="5950f-238">`pageSize`를 3으로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-238">Sets `pageSize` to 3.</span></span> <span data-ttu-id="5950f-239">실제 앱은 [구성](xref:fundamentals/configuration/index)을 사용하여 페이지 크기 값을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-239">A real app would use [Configuration](xref:fundamentals/configuration/index) to set the page size value.</span></span>

<span data-ttu-id="5950f-240">다음과 같은 경우 `OnGetAsync`가 수신하는 모든 매개 변수는 Null입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-240">All the parameters that `OnGetAsync` receives are null when:</span></span>

* <span data-ttu-id="5950f-241">페이지가 **학생** 링크에서 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-241">The page is called from the **Students** link.</span></span>
* <span data-ttu-id="5950f-242">사용자가 페이징 또는 정렬 링크를 클릭하지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-242">The user hasn't clicked a paging or sorting link.</span></span>

<span data-ttu-id="5950f-243">페이징 링크를 클릭하면 페이지 인덱스 변수에 표시할 페이지 번호가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-243">When a paging link is clicked, the page index variable contains the page number to display.</span></span>

<span data-ttu-id="5950f-244">`CurrentSort` 속성은 Razor Page에 현재 정렬 순서를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-244">The `CurrentSort` property provides the Razor Page with the current sort order.</span></span> <span data-ttu-id="5950f-245">현재 정렬 순서는 페이징하는 동안 정렬 순서를 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-245">The current sort order must be included in the paging links to keep the sort order while paging.</span></span>

<span data-ttu-id="5950f-246">`CurrentFilter` 속성은 Razor Page에 현재 필터 문자열을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-246">The `CurrentFilter` property provides the Razor Page with the current filter string.</span></span> <span data-ttu-id="5950f-247">`CurrentFilter` 값은:</span><span class="sxs-lookup"><span data-stu-id="5950f-247">The `CurrentFilter` value:</span></span>

* <span data-ttu-id="5950f-248">페이징하는 동안 필터 설정을 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-248">Must be included in the paging links in order to maintain the filter settings during paging.</span></span>
* <span data-ttu-id="5950f-249">페이지를 다시 표시하는 경우 텍스트 상자에 복원되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-249">Must be restored to the text box when the page is redisplayed.</span></span>

<span data-ttu-id="5950f-250">검색 문자열이 페이징하는 동안 변경되면 페이지가 1로 다시 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-250">If the search string is changed while paging, the page is reset to 1.</span></span> <span data-ttu-id="5950f-251">새 필터로 인해 다른 데이터가 표시될 수 있으므로 페이지는 1로 재설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-251">The page has to be reset to 1 because the new filter can result in different data to display.</span></span> <span data-ttu-id="5950f-252">검색 값을 입력하는 경우 및 **전송** 을 선택한 경우:</span><span class="sxs-lookup"><span data-stu-id="5950f-252">When a search value is entered and **Submit** is selected:</span></span>

  * <span data-ttu-id="5950f-253">검색 문자열이 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-253">The search string is changed.</span></span>
  * <span data-ttu-id="5950f-254">`searchString` 매개 변수가 null이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-254">The `searchString` parameter isn't null.</span></span>

  <span data-ttu-id="5950f-255">`PaginatedList.CreateAsync` 메서드가 학생 쿼리를 페이징을 지원하는 컬렉션 형식의 단일 학생 페이지로 변환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-255">The `PaginatedList.CreateAsync` method converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="5950f-256">해당 단일 학생 페이지가 Razor 페이지에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-256">That single page of students is passed to the Razor Page.</span></span>

  <span data-ttu-id="5950f-257">`PaginatedList.CreateAsync`에서 `pageIndex` 뒤에 있는 두 개의 물음표는 [Null 병합 연산자](/dotnet/csharp/language-reference/operators/null-conditional-operator)를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-257">The two question marks after `pageIndex` in the `PaginatedList.CreateAsync` call represent the [null-coalescing operator](/dotnet/csharp/language-reference/operators/null-conditional-operator).</span></span> <span data-ttu-id="5950f-258">Null 병합 연산자는 null 허용 형식에 대한 기본값을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-258">The null-coalescing operator defines a default value for a nullable type.</span></span> <span data-ttu-id="5950f-259">`pageIndex ?? 1` 식은 값이 있으면 `pageIndex`의 값을 반환하고, 그렇지 않으면 1을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-259">The expression `pageIndex ?? 1` returns the value of `pageIndex` if it has a value, otherwise, it returns 1.</span></span>

### <a name="add-paging-links-to-the-no-locrazor-page"></a><span data-ttu-id="5950f-260">Razor Page에 페이징 링크 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-260">Add paging links to the Razor Page</span></span>

<span data-ttu-id="5950f-261">*Students/Index.cshtml* 의 코드를 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-261">Replace the code in *Students/Index.cshtml* with the following code.</span></span> <span data-ttu-id="5950f-262">변경 내용이 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-262">The changes are highlighted:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/Students/Index.cshtml?highlight=29-32,38-41,69-87)]

<span data-ttu-id="5950f-263">열 머리글 링크는 쿼리 문자열을 사용하여 현재 검색 문자열을 `OnGetAsync` 메서드에 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-263">The column header links use the query string to pass the current search string to the `OnGetAsync` method:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/Students/Index.cshtml?range=29-32)]

<span data-ttu-id="5950f-264">태그 도우미에 페이징 단추가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-264">The paging buttons are displayed by tag helpers:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/Students/Index.cshtml?range=73-87)]

<span data-ttu-id="5950f-265">앱을 실행하고 학생 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-265">Run the app and navigate to the students page.</span></span>

* <span data-ttu-id="5950f-266">페이징이 작동하는지 확인하려면 다른 정렬 순서의 페이징 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-266">To make sure paging works, click the paging links in different sort orders.</span></span>
* <span data-ttu-id="5950f-267">정렬 및 필터링을 통해 페이징이 제대로 작동하는지 확인하려면 검색 문자열을 입력하고 페이징을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-267">To verify that paging works correctly with sorting and filtering, enter a search string and try paging.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging30.png)

## <a name="add-grouping"></a><span data-ttu-id="5950f-269">그룹화 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-269">Add grouping</span></span>

<span data-ttu-id="5950f-270">이 섹션에서는 각 등록 날짜에 대해 등록한 학생 수를 표시하는 정보 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-270">This section creates an About page that displays how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="5950f-271">업데이트는 그룹화를 사용하며 다음 단계를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-271">The update uses grouping and includes the following steps:</span></span>

* <span data-ttu-id="5950f-272">**정보** 페이지에서 사용되는 데이터에 대한 뷰 모델을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-272">Create a view model for the data used by the **About** page.</span></span>
* <span data-ttu-id="5950f-273">정보 페이지를 업데이트하여 보기 모델을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-273">Update the About page to use the view model.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="5950f-274">뷰 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="5950f-274">Create the view model</span></span>

<span data-ttu-id="5950f-275">*Models/SchoolViewModels* 폴더를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-275">Create a *Models/SchoolViewModels* folder.</span></span>

<span data-ttu-id="5950f-276">다음 코드로 *SchoolViewModels/EnrollmentDateGroup.cs* 를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-276">Create *SchoolViewModels/EnrollmentDateGroup.cs* with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu30/Models/SchoolViewModels/EnrollmentDateGroup.cs)]

### <a name="create-the-no-locrazor-page"></a><span data-ttu-id="5950f-277">Razor Page 만들기</span><span class="sxs-lookup"><span data-stu-id="5950f-277">Create the Razor Page</span></span>

<span data-ttu-id="5950f-278">다음 코드로 *Pages/About.cshtml* 파일을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-278">Create a *Pages/About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](intro/samples/cu30/Pages/About.cshtml)]

### <a name="create-the-page-model"></a><span data-ttu-id="5950f-279">페이지 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="5950f-279">Create the page model</span></span>

<span data-ttu-id="5950f-280">*Pages/About.cshtml.cs* 파일을 다음 코드로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-280">Update the *Pages/About.cshtml.cs* file with the following code:</span></span>

[!code-csharp[Main](intro/samples/cu30/Pages/About.cshtml.cs)]

<span data-ttu-id="5950f-281">LINQ 문은 등록 날짜별로 학생 엔터티를 그룹화하고 각 그룹의 엔터티 수를 계산하며 결과를 `EnrollmentDateGroup` 뷰 모델 개체의 컬렉션에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-281">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="5950f-282">앱을 실행하고 정보 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-282">Run the app and navigate to the About page.</span></span> <span data-ttu-id="5950f-283">각 등록 날짜에 대한 학생 수가 테이블에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-283">The count of students for each enrollment date is displayed in a table.</span></span>

![정보 페이지](sort-filter-page/_static/about30.png)

## <a name="next-steps"></a><span data-ttu-id="5950f-285">다음 단계</span><span class="sxs-lookup"><span data-stu-id="5950f-285">Next steps</span></span>

<span data-ttu-id="5950f-286">다음 자습서에서는 앱은 마이그레이션을 사용하여 데이터 모델을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-286">In the next tutorial, the app uses migrations to update the data model.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5950f-287">[이전 자습서](xref:data/ef-rp/crud)
> [다음 자습서](xref:data/ef-rp/migrations)</span><span class="sxs-lookup"><span data-stu-id="5950f-287">[Previous tutorial](xref:data/ef-rp/crud)
[Next tutorial](xref:data/ef-rp/migrations)</span></span>

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="5950f-288">이 자습서에서는 정렬, 필터링, 그룹화 및 페이징 기능이 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-288">In this tutorial, sorting, filtering, grouping, and paging, functionality is added.</span></span>

<span data-ttu-id="5950f-289">다음 그림은 완료된 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-289">The following illustration shows a completed page.</span></span> <span data-ttu-id="5950f-290">열 제목은 열을 정렬하는 클릭할 수 있는 링크입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-290">The column headings are clickable links to sort the column.</span></span> <span data-ttu-id="5950f-291">열 제목을 반복적으로 클릭하면 오름차순과 내림차순 정렬 순서 사이로 전환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-291">Clicking a column heading repeatedly switches between ascending and descending sort order.</span></span>

![학생 인덱스 페이지](sort-filter-page/_static/paging.png)

<span data-ttu-id="5950f-293">해결할 수 없는 문제가 발생한 경우 [완성된 앱](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples)을 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-293">If you run into problems you can't solve, download the [completed app](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples).</span></span>

## <a name="add-sorting-to-the-index-page"></a><span data-ttu-id="5950f-294">인덱스 페이지에 정렬 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-294">Add sorting to the Index page</span></span>

<span data-ttu-id="5950f-295">정렬 매개 변수를 포함할 *Students/Index.cshtml.cs* `PageModel`에 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-295">Add strings to the *Students/Index.cshtml.cs* `PageModel` to contain the sorting parameters:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet1&highlight=10-13)]

<span data-ttu-id="5950f-296">다음 코드를 사용하여 *Students/Index.cshtml.cs* `OnGetAsync`를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-296">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly)]

<span data-ttu-id="5950f-297">이전 코드는 URL의 쿼리 문자열에서 `sortOrder` 매개 변수를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-297">The preceding code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="5950f-298">URL(쿼리 문자열 포함)이 [앵커 태그 도우미](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper
)에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-298">The URL (including the query string) is generated by the [Anchor Tag Helper](xref:mvc/views/tag-helpers/builtin-th/anchor-tag-helper
)</span></span>

<span data-ttu-id="5950f-299">`sortOrder` 매개 변수는 “Name” 또는 “Date”입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-299">The `sortOrder` parameter is either "Name" or "Date."</span></span> <span data-ttu-id="5950f-300">`sortOrder` 매개 변수의 뒤에 오는 “_desc”는 내림차순 순서를 지정하기 위한 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-300">The `sortOrder` parameter is optionally followed by "_desc" to specify descending order.</span></span> <span data-ttu-id="5950f-301">기본 정렬 순서는 오름차순입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-301">The default sort order is ascending.</span></span>

<span data-ttu-id="5950f-302">인덱스 페이지가 **학생** 링크에서 요청되는 경우 쿼리 문자열이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-302">When the Index page is requested from the **Students** link, there's no query string.</span></span> <span data-ttu-id="5950f-303">학생은 성 기준 오름차순으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-303">The students are displayed in ascending order by last name.</span></span> <span data-ttu-id="5950f-304">`switch` 문에서 성 기준 오름차순이 기본값(제어 이동 사례)입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-304">Ascending order by last name is the default (fall-through case) in the `switch` statement.</span></span> <span data-ttu-id="5950f-305">사용자가 열 제목 링크를 클릭하면 적절한 `sortOrder` 값이 쿼리 문자열 값에 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-305">When the user clicks a column heading link, the appropriate `sortOrder` value is provided in the query string value.</span></span>

<span data-ttu-id="5950f-306">Razor Page에서 열 제목 하이퍼링크를 적절한 쿼리 문자열 값으로 구성하기 위해 `NameSort` 및 `DateSort`가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-306">`NameSort` and `DateSort` are used by the Razor Page to configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly&highlight=3-4)]

<span data-ttu-id="5950f-307">다음 코드는 C# 조건적 [?: 연산자](/dotnet/csharp/language-reference/operators/conditional-operator)를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-307">The following code contains the C# conditional [?: operator](/dotnet/csharp/language-reference/operators/conditional-operator):</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_Ternary)]

<span data-ttu-id="5950f-308">첫 번째 줄은 `sortOrder`가 null이거나 비어 있는 경우 `NameSort`가 “name_desc”로 설정되도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-308">The first line specifies that when `sortOrder` is null or empty, `NameSort` is set to "name_desc."</span></span> <span data-ttu-id="5950f-309">`sortOrder`가 null 또는 비어 있지 **않은** 경우 `NameSort`는 빈 문자열로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-309">If `sortOrder` is **not** null or empty, `NameSort` is set to an empty string.</span></span>

<span data-ttu-id="5950f-310">`?: operator`는 삼진 연산자라고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-310">The `?: operator` is also known as the ternary operator.</span></span>

<span data-ttu-id="5950f-311">이러한 두 명령문을 사용하면 페이지에서 다음과 같이 열 제목 하이퍼링크를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-311">These two statements enable the page to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="5950f-312">현재 정렬 순서</span><span class="sxs-lookup"><span data-stu-id="5950f-312">Current sort order</span></span> | <span data-ttu-id="5950f-313">성 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="5950f-313">Last Name Hyperlink</span></span> | <span data-ttu-id="5950f-314">날짜 하이퍼링크</span><span class="sxs-lookup"><span data-stu-id="5950f-314">Date Hyperlink</span></span> |
|:--------------------:|:-------------------:|:--------------:|
| <span data-ttu-id="5950f-315">성 오름차순</span><span class="sxs-lookup"><span data-stu-id="5950f-315">Last Name ascending</span></span> | <span data-ttu-id="5950f-316">descending</span><span class="sxs-lookup"><span data-stu-id="5950f-316">descending</span></span>        | <span data-ttu-id="5950f-317">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-317">ascending</span></span>      |
| <span data-ttu-id="5950f-318">성 내림차순</span><span class="sxs-lookup"><span data-stu-id="5950f-318">Last Name descending</span></span> | <span data-ttu-id="5950f-319">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-319">ascending</span></span>           | <span data-ttu-id="5950f-320">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-320">ascending</span></span>      |
| <span data-ttu-id="5950f-321">날짜 오름차순</span><span class="sxs-lookup"><span data-stu-id="5950f-321">Date ascending</span></span>       | <span data-ttu-id="5950f-322">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-322">ascending</span></span>           | <span data-ttu-id="5950f-323">descending</span><span class="sxs-lookup"><span data-stu-id="5950f-323">descending</span></span>     |
| <span data-ttu-id="5950f-324">날짜 내림차순</span><span class="sxs-lookup"><span data-stu-id="5950f-324">Date descending</span></span>      | <span data-ttu-id="5950f-325">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-325">ascending</span></span>           | <span data-ttu-id="5950f-326">ascending</span><span class="sxs-lookup"><span data-stu-id="5950f-326">ascending</span></span>      |

<span data-ttu-id="5950f-327">메서드는 LINQ to Entities를 사용하여 정렬할 기준이 되는 열을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-327">The method uses LINQ to Entities to specify the column to sort by.</span></span> <span data-ttu-id="5950f-328">코드는 `IQueryable<Student>`를 switch 문 앞에서 초기화하고 switch 문에서 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-328">The code initializes an `IQueryable<Student>` before the switch statement, and modifies it in the switch statement:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnly&highlight=6-999)]

 <span data-ttu-id="5950f-329">`IQueryable`을 만들거나 수정하는 경우 데이터베이스에 쿼리가 전송되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-329">When an`IQueryable` is created or modified, no query is sent to the database.</span></span> <span data-ttu-id="5950f-330">쿼리는 `IQueryable` 개체가 컬렉션으로 변환될 때까지 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-330">The query isn't executed until the `IQueryable` object is converted into a collection.</span></span> <span data-ttu-id="5950f-331">`ToListAsync`와 같은 메서드를 호출하면 `IQueryable`이 컬렉션으로 변환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-331">`IQueryable` are converted to a collection by calling a method such as `ToListAsync`.</span></span> <span data-ttu-id="5950f-332">따라서 `IQueryable` 코드는 다음 명령문까지 실행되지 않는 단일 쿼리가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-332">Therefore, the `IQueryable` code results in a single query that's not executed until the following statement:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortOnlyRtn)]

<span data-ttu-id="5950f-333">`OnGetAsync`는 많은 수의 정렬 가능한 열이 포함된 자세한 정보를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-333">`OnGetAsync` could get verbose with a large number of sortable columns.</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-page"></a><span data-ttu-id="5950f-334">학생 인덱스 페이지에 열 제목 하이퍼링크 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-334">Add column heading hyperlinks to the Student Index page</span></span>

<span data-ttu-id="5950f-335">*Students/Index.cshtml* 의 코드를 다음 강조 표시된 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-335">Replace the code in *Students/Index.cshtml*, with the following highlighted code:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index2.cshtml?highlight=17-19,25-27)]

<span data-ttu-id="5950f-336">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="5950f-336">The preceding code:</span></span>

* <span data-ttu-id="5950f-337">하이퍼링크를 `LastName` 및 `EnrollmentDate` 열 머리글에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-337">Adds hyperlinks to the `LastName` and `EnrollmentDate` column headings.</span></span>
* <span data-ttu-id="5950f-338">`NameSort` 및 `DateSort`의 정보를 사용하여 현재 정렬 순서 값으로 하이퍼링크를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-338">Uses the information in `NameSort` and `DateSort` to set up hyperlinks with the current sort order values.</span></span>

<span data-ttu-id="5950f-339">정렬이 작동하는지 확인하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-339">To verify that sorting works:</span></span>

* <span data-ttu-id="5950f-340">앱을 실행하고 **학생** 탭을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-340">Run the app and select the **Students** tab.</span></span>
* <span data-ttu-id="5950f-341">**성** 을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-341">Click **Last Name**.</span></span>
* <span data-ttu-id="5950f-342">**등록 날짜** 를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-342">Click **Enrollment Date**.</span></span>

<span data-ttu-id="5950f-343">코드를 더 잘 이해하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-343">To get a better understanding of the code:</span></span>

* <span data-ttu-id="5950f-344">*Students/Index.cshtml.cs* 에서 `switch (sortOrder)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-344">In *Students/Index.cshtml.cs*, set a breakpoint on `switch (sortOrder)`.</span></span>
* <span data-ttu-id="5950f-345">`NameSort` 및 `DateSort`에 대한 조사식을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-345">Add a watch for `NameSort` and `DateSort`.</span></span>
* <span data-ttu-id="5950f-346">*Students/Index.cshtml* 에서 `@Html.DisplayNameFor(model => model.Student[0].LastName)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-346">In *Students/Index.cshtml*, set a breakpoint on `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span></span>

<span data-ttu-id="5950f-347">디버거를 단계별로 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-347">Step through the debugger.</span></span>

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="5950f-348">학생 인덱스 페이지에 검색 상자 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-348">Add a Search Box to the Students Index page</span></span>

<span data-ttu-id="5950f-349">학생 인덱스 페이지에 필터링을 추가하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-349">To add filtering to the Students Index page:</span></span>

* <span data-ttu-id="5950f-350">텍스트 상자 및 전송 단추가 Razor 페이지에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-350">A text box and a submit button is added to the Razor Page.</span></span> <span data-ttu-id="5950f-351">텍스트 상자는 첫 번째 또는 마지막 이름에 검색 문자열을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-351">The text box supplies a search string on the first or last name.</span></span>
* <span data-ttu-id="5950f-352">페이지 모델이 텍스트 상자 값을 사용하도록 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-352">The page model is updated to use the text box value.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="5950f-353">인덱스 메서드에 필터링 기능 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-353">Add filtering functionality to the Index method</span></span>

<span data-ttu-id="5950f-354">다음 코드를 사용하여 *Students/Index.cshtml.cs* `OnGetAsync`를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-354">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilter&highlight=1,5,9-13)]

<span data-ttu-id="5950f-355">위의 코드는</span><span class="sxs-lookup"><span data-stu-id="5950f-355">The preceding code:</span></span>

* <span data-ttu-id="5950f-356">`searchString` 매개 변수를 `OnGetAsync` 메서드에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-356">Adds the `searchString` parameter to the `OnGetAsync` method.</span></span> <span data-ttu-id="5950f-357">다음 섹션에서 추가되는 텍스트 상자에서 검색 문자열 값이 수신됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-357">The search string value is received from a text box that's added in the next section.</span></span>
* <span data-ttu-id="5950f-358">LINQ 문 및 `Where` 절을 추가했습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-358">Added to the LINQ statement a `Where` clause.</span></span> <span data-ttu-id="5950f-359">`Where` 절은 이름 또는 성에 검색 문자열이 포함된 학생만 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-359">The `Where` clause selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="5950f-360">LINQ 문은 검색할 값이 있는 경우에만 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-360">The LINQ statement is executed only if there's a value to search for.</span></span>

<span data-ttu-id="5950f-361">참고: 이전 코드는 `IQueryable` 개체에서 `Where` 메서드를 호출하고, 필터는 서버에서 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-361">Note: The preceding code calls the `Where` method on an `IQueryable` object, and the filter is processed on the server.</span></span> <span data-ttu-id="5950f-362">일부 시나리오에서 앱은 메모리 내 컬렉션에서 확장 메서드로 `Where` 메서드를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-362">In some scenarios, the app might be calling the `Where` method as an extension method on an in-memory collection.</span></span> <span data-ttu-id="5950f-363">예를 들어 `_context.Students`가 EF Core `DbSet`에서 `IEnumerable` 컬렉션을 반환하는 리포지토리 메서드로 변경되었다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-363">For example, suppose `_context.Students` changes from EF Core `DbSet` to a repository method that returns an `IEnumerable` collection.</span></span> <span data-ttu-id="5950f-364">결과는 일반적으로 동일하지만 경우에 따라 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-364">The result would normally be the same but in some cases may be different.</span></span>

<span data-ttu-id="5950f-365">예를 들어 `Contains`의 .NET Framework 구현은 기본적으로 대/소문자 구분 비교를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-365">For example, the .NET Framework implementation of `Contains` performs a case-sensitive comparison by default.</span></span> <span data-ttu-id="5950f-366">SQL Server에서 `Contains` 대/소문자 구분은 SQL Server 인스턴스의 컬렉션 설정에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-366">In SQL Server, `Contains` case-sensitivity is determined by the collation setting of the SQL Server instance.</span></span> <span data-ttu-id="5950f-367">SQL Server는 기본적으로 대/소문자를 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-367">SQL Server defaults to case-insensitive.</span></span> <span data-ttu-id="5950f-368">`ToUpper`는 테스트가 명시적으로 대/소문자를 구분하지 않도록 하기 위해 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-368">`ToUpper` could be called to make the test explicitly case-insensitive:</span></span>

`Where(s => s.LastName.ToUpper().Contains(searchString.ToUpper())`

<span data-ttu-id="5950f-369">위의 코드는 코드가 `IEnumerable`을 사용하도록 변경된 경우 결과가 대/소문자를 구분하지 않는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-369">The preceding code would ensure that results are case-insensitive if the code changes to use `IEnumerable`.</span></span> <span data-ttu-id="5950f-370">`Contains`가 `IEnumerable` 컬렉션에서 호출된 경우 .NET Core 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-370">When `Contains` is called on an `IEnumerable` collection, the .NET Core implementation is used.</span></span> <span data-ttu-id="5950f-371">`Contains`가 `IQueryable` 개체에서 호출된 경우 데이터베이스 구현이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-371">When `Contains` is called on an `IQueryable` object, the database implementation is used.</span></span> <span data-ttu-id="5950f-372">리포지토리에서 `IEnumerable`을 반환하면 상당한 성능 저하가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-372">Returning an `IEnumerable` from a repository can have a significant performance penalty:</span></span>

1. <span data-ttu-id="5950f-373">모든 행이 DB 서버에서 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-373">All the rows are returned from the DB server.</span></span>
1. <span data-ttu-id="5950f-374">필터는 애플리케이션에서 반환된 모든 행에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-374">The filter is applied to all the returned rows in the application.</span></span>

<span data-ttu-id="5950f-375">`ToUpper` 호출에 대한 성능 저하가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-375">There's a performance penalty for calling `ToUpper`.</span></span> <span data-ttu-id="5950f-376">`ToUpper` 코드는 TSQL SELECT 문의 WHERE 절에 함수를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-376">The `ToUpper` code adds a function in the WHERE clause of the TSQL SELECT statement.</span></span> <span data-ttu-id="5950f-377">추가된 함수는 최적화 프로그램이 인덱스를 사용하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-377">The added function prevents the optimizer from using an index.</span></span> <span data-ttu-id="5950f-378">SQL은 대/소문자를 구분하지 않도록 설치되어 있으므로 필요하지 않은 경우 `ToUpper` 호출을 피하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-378">Given that SQL is installed as case-insensitive, it's best to avoid the `ToUpper` call when it's not needed.</span></span>

### <a name="add-a-search-box-to-the-student-index-page"></a><span data-ttu-id="5950f-379">학생 인덱스 페이지에 검색 상자 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-379">Add a Search Box to the Student Index page</span></span>

<span data-ttu-id="5950f-380">*Pages/Students/Index.cshtml* 에서 다음 강조 표시된 코드를 추가하여 **검색** 단추와 다양한 크롬을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-380">In *Pages/Students/Index.cshtml*, add the following highlighted code to create a **Search** button and assorted chrome.</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index3.cshtml?highlight=14-23&range=1-25)]

<span data-ttu-id="5950f-381">위의 코드는 `<form>` [태그 도우미](xref:mvc/views/tag-helpers/intro)를 사용하여 검색 텍스트 상자와 단추를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-381">The preceding code uses the `<form>` [tag helper](xref:mvc/views/tag-helpers/intro) to add the search text box and button.</span></span> <span data-ttu-id="5950f-382">기본적으로 `<form>` 태그 도우미는 POST로 양식 데이터를 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-382">By default, the `<form>` tag helper submits form data with a POST.</span></span> <span data-ttu-id="5950f-383">POST를 사용하면 매개 변수가 URL에 없는 HTTP 메시지 본문에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-383">With POST, the parameters are passed in the HTTP message body and not in the URL.</span></span> <span data-ttu-id="5950f-384">HTTP GET을 사용하는 경우 양식 데이터가 URL에 쿼리 문자열로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-384">When HTTP GET is used, the form data is passed in the URL as query strings.</span></span> <span data-ttu-id="5950f-385">사용자는 쿼리 문자열로 데이터를 전달하여 URL을 책갈피로 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-385">Passing the data with query strings enables users to bookmark the URL.</span></span> <span data-ttu-id="5950f-386">[W3C 지침](https://www.w3.org/2001/tag/doc/whenToUseGet.html)에 따라 작업이 업데이트되지 않을 때 GET을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-386">The [W3C guidelines](https://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that GET should be used when the action doesn't result in an update.</span></span>

<span data-ttu-id="5950f-387">앱을 테스트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-387">Test the app:</span></span>

* <span data-ttu-id="5950f-388">**학생** 탭을 선택하고 검색 문자열을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-388">Select the **Students** tab and enter a search string.</span></span>
* <span data-ttu-id="5950f-389">**검색** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-389">Select **Search**.</span></span>

<span data-ttu-id="5950f-390">URL에 검색 문자열이 포함되어 있음을 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="5950f-390">Notice that the URL contains the search string.</span></span>

```html
http://localhost:5000/Students?SearchString=an
```

<span data-ttu-id="5950f-391">페이지가 책갈피로 표시된 경우 책갈피에는 페이지에 대한 URL 및 `SearchString` 쿼리 문자열이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-391">If the page is bookmarked, the bookmark contains the URL to the page and the `SearchString` query string.</span></span> <span data-ttu-id="5950f-392">`form` 태그의 `method="get"`으로 인해 쿼리 문자열이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-392">The `method="get"` in the `form` tag is what caused the query string to be generated.</span></span>

<span data-ttu-id="5950f-393">현재 열 제목 정렬 링크를 선택하면 **검색** 상자에서 필터 값이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-393">Currently, when a column heading sort link is selected, the filter value from the **Search** box is lost.</span></span> <span data-ttu-id="5950f-394">손실된 필터 값은 다음 섹션에서 수정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-394">The lost filter value is fixed in the next section.</span></span>

## <a name="add-paging-functionality-to-the-students-index-page"></a><span data-ttu-id="5950f-395">학생 인덱스 페이지에 페이징 기능 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-395">Add paging functionality to the Students Index page</span></span>

<span data-ttu-id="5950f-396">이 섹션에서는 페이징을 지원하기 위해 `PaginatedList` 클래스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-396">In this section, a `PaginatedList` class is created to support paging.</span></span> <span data-ttu-id="5950f-397">`PaginatedList` 클래스는 `Skip` 및 `Take` 문을 사용하여 테이블의 모든 행을 검색하는 대신 서버에 있는 데이터를 필터링합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-397">The `PaginatedList` class uses `Skip` and `Take` statements to filter data on the server instead of retrieving all rows of the table.</span></span> <span data-ttu-id="5950f-398">다음 그림에는 페이징 단추가 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-398">The following illustration shows the paging buttons.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging.png)

<span data-ttu-id="5950f-400">프로젝트 폴더에서 다음 코드로 `PaginatedList.cs`를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-400">In the project folder, create `PaginatedList.cs` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/PaginatedList.cs)]

<span data-ttu-id="5950f-401">이전 코드에서 `CreateAsync` 메서드는 페이지 크기 및 페이지 번호를 사용하고 적절한 `Skip` 및 `Take` 문을 `IQueryable`에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-401">The `CreateAsync` method in the preceding code takes page size and page number and applies the appropriate `Skip` and `Take` statements to the `IQueryable`.</span></span> <span data-ttu-id="5950f-402">`IQueryable`에서 `ToListAsync`를 호출하면 요청된 페이지만 포함하는 목록을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-402">When `ToListAsync` is called on the `IQueryable`, it returns a List containing only the requested page.</span></span> <span data-ttu-id="5950f-403">**이전** 및 **다음** 페이징 단추를 사용 또는 사용하지 않도록 설정하는 데 `HasPreviousPage` 및 `HasNextPage` 속성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-403">The properties `HasPreviousPage` and `HasNextPage` are used to enable or disable **Previous** and **Next** paging buttons.</span></span>

<span data-ttu-id="5950f-404">`CreateAsync` 메서드는 `PaginatedList<T>`를 만드는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-404">The `CreateAsync` method is used to create the `PaginatedList<T>`.</span></span> <span data-ttu-id="5950f-405">생성자를 `PaginatedList<T>` 개체를 만들 수 없고, 생성자는 비동기 코드를 실행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-405">A constructor can't create the `PaginatedList<T>` object, constructors can't run asynchronous code.</span></span>

## <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="5950f-406">인덱스 메서드에 페이징 기능 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-406">Add paging functionality to the Index method</span></span>

<span data-ttu-id="5950f-407">*Students/Index.cshtml.cs* 에서 `Student`의 형식을 `IList<Student>`에서 `PaginatedList<Student>`로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-407">In *Students/Index.cshtml.cs*, update the type of `Student` from `IList<Student>` to `PaginatedList<Student>`:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPageType)]

<span data-ttu-id="5950f-408">다음 코드를 사용하여 *Students/Index.cshtml.cs* `OnGetAsync`를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-408">Update the *Students/Index.cshtml.cs* `OnGetAsync` with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage&highlight=1-4,7-14,41-999)]

<span data-ttu-id="5950f-409">이전 코드는 페이지 인덱스, 현재 `sortOrder` 및 `currentFilter`를 메서드 서명에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-409">The preceding code adds the page index, the current `sortOrder`, and the `currentFilter` to the method signature.</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage2)]

<span data-ttu-id="5950f-410">모든 매개 변수는 다음 경우에 null입니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-410">All the parameters are null when:</span></span>

* <span data-ttu-id="5950f-411">페이지가 **학생** 링크에서 호출됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-411">The page is called from the **Students** link.</span></span>
* <span data-ttu-id="5950f-412">사용자가 페이징 또는 정렬 링크를 클릭하지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-412">The user hasn't clicked a paging or sorting link.</span></span>

<span data-ttu-id="5950f-413">페이징 링크를 클릭하면 페이지 인덱스 변수에 표시할 페이지 번호가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-413">When a paging link is clicked, the page index variable contains the page number to display.</span></span>

<span data-ttu-id="5950f-414">`CurrentSort`는 Razor 페이지를 현재 정렬 순서로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-414">`CurrentSort` provides the Razor Page with the current sort order.</span></span> <span data-ttu-id="5950f-415">현재 정렬 순서는 페이징하는 동안 정렬 순서를 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-415">The current sort order must be included in the paging links to keep the sort order while paging.</span></span>

<span data-ttu-id="5950f-416">`CurrentFilter`는 Razor 페이지를 현재 필터 문자열로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-416">`CurrentFilter` provides the Razor Page with the current filter string.</span></span> <span data-ttu-id="5950f-417">`CurrentFilter` 값은:</span><span class="sxs-lookup"><span data-stu-id="5950f-417">The `CurrentFilter` value:</span></span>

* <span data-ttu-id="5950f-418">페이징하는 동안 필터 설정을 유지하기 위해 페이징 링크에 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-418">Must be included in the paging links in order to maintain the filter settings during paging.</span></span>
* <span data-ttu-id="5950f-419">페이지를 다시 표시하는 경우 텍스트 상자에 복원되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-419">Must be restored to the text box when the page is redisplayed.</span></span>

<span data-ttu-id="5950f-420">검색 문자열이 페이징하는 동안 변경되면 페이지가 1로 다시 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-420">If the search string is changed while paging, the page is reset to 1.</span></span> <span data-ttu-id="5950f-421">새 필터로 인해 다른 데이터가 표시될 수 있으므로 페이지는 1로 재설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-421">The page has to be reset to 1 because the new filter can result in different data to display.</span></span> <span data-ttu-id="5950f-422">검색 값을 입력하는 경우 및 **전송** 을 선택한 경우:</span><span class="sxs-lookup"><span data-stu-id="5950f-422">When a search value is entered and **Submit** is selected:</span></span>

* <span data-ttu-id="5950f-423">검색 문자열이 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-423">The search string is changed.</span></span>
* <span data-ttu-id="5950f-424">`searchString` 매개 변수가 null이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-424">The `searchString` parameter isn't null.</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage3)]

<span data-ttu-id="5950f-425">`PaginatedList.CreateAsync` 메서드가 학생 쿼리를 페이징을 지원하는 컬렉션 형식의 단일 학생 페이지로 변환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-425">The `PaginatedList.CreateAsync` method converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="5950f-426">해당 단일 학생 페이지가 Razor 페이지에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-426">That single page of students is passed to the Razor Page.</span></span>

[!code-csharp[](intro/samples/cu21/Pages/Students/Index.cshtml.cs?name=snippet_SortFilterPage4)]

<span data-ttu-id="5950f-427">`PaginatedList.CreateAsync`에서 두 개의 물음표는 [Null 병합 연산자](/dotnet/csharp/language-reference/operators/null-conditional-operator)를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-427">The two question marks in `PaginatedList.CreateAsync` represent the [null-coalescing operator](/dotnet/csharp/language-reference/operators/null-conditional-operator).</span></span> <span data-ttu-id="5950f-428">Null 병합 연산자는 null 허용 형식에 대한 기본값을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-428">The null-coalescing operator defines a default value for a nullable type.</span></span> <span data-ttu-id="5950f-429">식 `(pageIndex ?? 1)`은 값이 있는 경우 `pageIndex`의 값을 반환함을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-429">The expression `(pageIndex ?? 1)` means return the value of `pageIndex` if it has a value.</span></span> <span data-ttu-id="5950f-430">`pageIndex`에 값이 없으면 1을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-430">If `pageIndex` doesn't have a value, return 1.</span></span>

## <a name="add-paging-links-to-the-student-no-locrazor-page"></a><span data-ttu-id="5950f-431">학생 Razor 페이지에 페이징 링크 추가</span><span class="sxs-lookup"><span data-stu-id="5950f-431">Add paging links to the student Razor Page</span></span>

<span data-ttu-id="5950f-432">*Students/Index.cshtml* 의 표시를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-432">Update the markup in *Students/Index.cshtml*.</span></span> <span data-ttu-id="5950f-433">변경 내용은 강조 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-433">The changes are highlighted:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index.cshtml?highlight=28-31,37-40,68-999)]

<span data-ttu-id="5950f-434">열 제목 링크는 쿼리 문자열을 사용하여 현재 검색 문자열을 `OnGetAsync` 메서드에 전달하므로 사용자가 필터 결과 내에서 정렬할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-434">The column header links use the query string to pass the current search string to the `OnGetAsync` method so that the user can sort within filter results:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index.cshtml?range=28-31)]

<span data-ttu-id="5950f-435">태그 도우미에 페이징 단추가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-435">The paging buttons are displayed by tag helpers:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/Students/Index.cshtml?range=72-)]

<span data-ttu-id="5950f-436">앱을 실행하고 학생 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-436">Run the app and navigate to the students page.</span></span>

* <span data-ttu-id="5950f-437">페이징이 작동하는지 확인하려면 다른 정렬 순서의 페이징 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-437">To make sure paging works, click the paging links in different sort orders.</span></span>
* <span data-ttu-id="5950f-438">정렬 및 필터링을 통해 페이징이 제대로 작동하는지 확인하려면 검색 문자열을 입력하고 페이징을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-438">To verify that paging works correctly with sorting and filtering, enter a search string and try paging.</span></span>

![페이징 링크가 있는 학생 인덱스 페이지](sort-filter-page/_static/paging.png)

<span data-ttu-id="5950f-440">코드를 더 잘 이해하려면 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-440">To get a better understanding of the code:</span></span>

* <span data-ttu-id="5950f-441">*Students/Index.cshtml.cs* 에서 `switch (sortOrder)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-441">In *Students/Index.cshtml.cs*, set a breakpoint on `switch (sortOrder)`.</span></span>
* <span data-ttu-id="5950f-442">`NameSort`, `DateSort`, `CurrentSort` 및 `Model.Student.PageIndex`에 대한 조사식을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-442">Add a watch for `NameSort`, `DateSort`, `CurrentSort`, and `Model.Student.PageIndex`.</span></span>
* <span data-ttu-id="5950f-443">*Students/Index.cshtml* 에서 `@Html.DisplayNameFor(model => model.Student[0].LastName)`에 중단점을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-443">In *Students/Index.cshtml*, set a breakpoint on `@Html.DisplayNameFor(model => model.Student[0].LastName)`.</span></span>

<span data-ttu-id="5950f-444">디버거를 단계별로 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-444">Step through the debugger.</span></span>

## <a name="update-the-about-page-to-show-student-statistics"></a><span data-ttu-id="5950f-445">학생 통계를 표시하도록 정보 페이지를 업데이트</span><span class="sxs-lookup"><span data-stu-id="5950f-445">Update the About page to show student statistics</span></span>

<span data-ttu-id="5950f-446">이 단계에서는 각 등록 날짜에 대해 등록한 학생 수를 표시하도록 *Pages/About.cshtml* 을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-446">In this step, *Pages/About.cshtml* is updated to display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="5950f-447">업데이트는 그룹화를 사용하며 다음 단계를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-447">The update uses grouping and includes the following steps:</span></span>

* <span data-ttu-id="5950f-448">**정보** 페이지에서 사용되는 데이터에 대한 보기 모델을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-448">Create a view model for the data used by the **About** Page.</span></span>
* <span data-ttu-id="5950f-449">정보 페이지를 업데이트하여 보기 모델을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-449">Update the About page to use the view model.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="5950f-450">뷰 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="5950f-450">Create the view model</span></span>

<span data-ttu-id="5950f-451">*Models* 폴더에 *SchoolViewModels* 폴더를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-451">Create a *SchoolViewModels* folder in the *Models* folder.</span></span>

<span data-ttu-id="5950f-452">*SchoolViewModels* 폴더에서 다음 코드로 *EnrollmentDateGroup.cs* 를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-452">In the *SchoolViewModels* folder, add a *EnrollmentDateGroup.cs* with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Models/SchoolViewModels/EnrollmentDateGroup.cs)]

### <a name="update-the-about-page-model"></a><span data-ttu-id="5950f-453">페이지 모델 정보 업데이트</span><span class="sxs-lookup"><span data-stu-id="5950f-453">Update the About page model</span></span>

<span data-ttu-id="5950f-454">ASP.NET Core 2.2의 웹 템플릿에는 정보 페이지가 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-454">The web templates in ASP.NET Core 2.2 do not include the About page.</span></span> <span data-ttu-id="5950f-455">ASP.NET Core 2.2를 사용하는 경우 Razor 정보 페이지를 만드세요.</span><span class="sxs-lookup"><span data-stu-id="5950f-455">If you are using ASP.NET Core 2.2, create the About Razor Page.</span></span>

<span data-ttu-id="5950f-456">*Pages/About.cshtml.cs* 파일을 다음 코드로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-456">Update the *Pages/About.cshtml.cs* file with the following code:</span></span>

[!code-csharp[](intro/samples/cu21/Pages/About.cshtml.cs)]

<span data-ttu-id="5950f-457">LINQ 문은 등록 날짜별로 학생 엔터티를 그룹화하고 각 그룹의 엔터티 수를 계산하며 결과를 `EnrollmentDateGroup` 뷰 모델 개체의 컬렉션에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-457">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

### <a name="modify-the-about-no-locrazor-page"></a><span data-ttu-id="5950f-458">Razor 페이지 정보 수정</span><span class="sxs-lookup"><span data-stu-id="5950f-458">Modify the About Razor Page</span></span>

<span data-ttu-id="5950f-459">*Pages/About.cshtml* 파일의 코드를 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-459">Replace the code in the *Pages/About.cshtml* file with the following code:</span></span>

[!code-cshtml[](intro/samples/cu21/Pages/About.cshtml)]

<span data-ttu-id="5950f-460">앱을 실행하고 정보 페이지로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-460">Run the app and navigate to the About page.</span></span> <span data-ttu-id="5950f-461">각 등록 날짜에 대한 학생 수가 테이블에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-461">The count of students for each enrollment date is displayed in a table.</span></span>

<span data-ttu-id="5950f-462">해결할 수 없는 문제가 발생한 경우 [이 단계에 완성된 앱](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting)을 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-462">If you run into problems you can't solve, download the [completed app for this stage](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/data/ef-rp/intro/samples/StageSnapShots/cu-part3-sorting).</span></span>

![정보 페이지](sort-filter-page/_static/about.png)

## <a name="additional-resources"></a><span data-ttu-id="5950f-464">추가 자료</span><span class="sxs-lookup"><span data-stu-id="5950f-464">Additional resources</span></span>

* [<span data-ttu-id="5950f-465">ASP.NET Core 2.x 소스 디버깅</span><span class="sxs-lookup"><span data-stu-id="5950f-465">Debugging ASP.NET Core 2.x source</span></span>](https://github.com/dotnet/AspNetCore.Docs/issues/4155)
* [<span data-ttu-id="5950f-466">이 자습서의 YouTube 버전</span><span class="sxs-lookup"><span data-stu-id="5950f-466">YouTube version of this tutorial</span></span>](https://www.youtube.com/watch?v=MDs7PFpoMqI)

<span data-ttu-id="5950f-467">다음 자습서에서는 앱은 마이그레이션을 사용하여 데이터 모델을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="5950f-467">In the next tutorial, the app uses migrations to update the data model.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5950f-468">[이전](xref:data/ef-rp/crud)
> [다음](xref:data/ef-rp/migrations)</span><span class="sxs-lookup"><span data-stu-id="5950f-468">[Previous](xref:data/ef-rp/crud)
[Next](xref:data/ef-rp/migrations)</span></span>

::: moniker-end

