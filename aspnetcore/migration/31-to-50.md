---
title: ASP.NET Core 3.1에서 5.0로 마이그레이션
author: scottaddie
description: ASP.NET Core 3.1 프로젝트를 ASP.NET Core 5.0로 마이그레이션하는 방법에 대해 알아봅니다.
ms.author: scaddie
ms.custom: mvc
ms.date: 11/30/2020
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: migration/31-to-50
ms.openlocfilehash: 9092aff3b1a2fc81c9c0892687a0aaf329038ee6
ms.sourcegitcommit: 43a540e703b9096921de27abc6b66bc0783fe905
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/30/2020
ms.locfileid: "96320124"
---
# <a name="migrate-from-aspnet-core-31-to-50"></a><span data-ttu-id="7720d-103">ASP.NET Core 3.1에서 5.0로 마이그레이션</span><span class="sxs-lookup"><span data-stu-id="7720d-103">Migrate from ASP.NET Core 3.1 to 5.0</span></span>

<span data-ttu-id="7720d-104">작성자: [Scott Addie](https://github.com/scottaddie)</span><span class="sxs-lookup"><span data-stu-id="7720d-104">By [Scott Addie](https://github.com/scottaddie)</span></span>

<span data-ttu-id="7720d-105">이 문서에서는 기존 ASP.NET Core 3.1 프로젝트를 ASP.NET Core 5.0로 업데이트 하는 방법을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-105">This article explains how to update an existing ASP.NET Core 3.1 project to ASP.NET Core 5.0.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7720d-106">사전 요구 사항</span><span class="sxs-lookup"><span data-stu-id="7720d-106">Prerequisites</span></span>

# <a name="visual-studio"></a>[<span data-ttu-id="7720d-107">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7720d-107">Visual Studio</span></span>](#tab/visual-studio)

[!INCLUDE[](~/includes/net-core-prereqs-vs-5.0.md)]

# <a name="visual-studio-code"></a>[<span data-ttu-id="7720d-108">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="7720d-108">Visual Studio Code</span></span>](#tab/visual-studio-code)

[!INCLUDE[](~/includes/net-core-prereqs-vsc-5.0.md)]

# <a name="visual-studio-for-mac"></a>[<span data-ttu-id="7720d-109">Mac용 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="7720d-109">Visual Studio for Mac</span></span>](#tab/visual-studio-mac)

[!INCLUDE[](~/includes/net-core-prereqs-mac-5.0.md)]

---

## <a name="update-net-core-sdk-version-in-globaljson"></a><span data-ttu-id="7720d-110">global.json의 .NET Core SDK 버전 업데이트</span><span class="sxs-lookup"><span data-stu-id="7720d-110">Update .NET Core SDK version in global.json</span></span>

<span data-ttu-id="7720d-111">특정 .NET Core SDK 버전을 대상으로 하는 파일 [ 의global.js](/dotnet/core/tools/global-json) 에 의존 하는 경우 `version` 설치 된 .net 5.0 SDK 버전으로 속성을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-111">If you rely upon a [global.json](/dotnet/core/tools/global-json) file to target a specific .NET Core SDK version, update the `version` property to the .NET 5.0 SDK version that's installed.</span></span> <span data-ttu-id="7720d-112">예:</span><span class="sxs-lookup"><span data-stu-id="7720d-112">For example:</span></span>

```diff
{
  "sdk": {
-    "version": "3.1.200"
+    "version": "5.0.100"
  }
}
```

## <a name="update-the-target-framework"></a><span data-ttu-id="7720d-113">대상 프레임 워크 업데이트</span><span class="sxs-lookup"><span data-stu-id="7720d-113">Update the target framework</span></span>

<span data-ttu-id="7720d-114">프로젝트를 업데이트 하는 경우 프로젝트 Blazor WebAssembly [업데이트 섹션 Blazor WebAssembly ](#update-blazor-webassembly-projects) 으로 건너뜁니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-114">If updating a Blazor WebAssembly project, skip to the [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) section.</span></span> <span data-ttu-id="7720d-115">다른 ASP.NET Core 프로젝트 형식의 경우 프로젝트 파일의 [대상 프레임 워크 모니커 (TFM)](/dotnet/standard/frameworks) 를로 업데이트 합니다 `net5.0` .</span><span class="sxs-lookup"><span data-stu-id="7720d-115">For any other ASP.NET Core project type, update the project file's [Target Framework Moniker (TFM)](/dotnet/standard/frameworks) to `net5.0`:</span></span>

```diff
<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
-    <TargetFramework>netcoreapp3.1</TargetFramework>
+    <TargetFramework>net5.0</TargetFramework>
  </PropertyGroup>

</Project>
```

## <a name="changes-to-no-locblazor-app-routing-logic-in-501"></a><span data-ttu-id="7720d-116">Blazor5.0.1 용의 앱 라우팅 논리 변경 내용</span><span class="sxs-lookup"><span data-stu-id="7720d-116">Changes to Blazor app routing logic in 5.0.1</span></span>

<span data-ttu-id="7720d-117">ASP.NET Core 5.0.1 용 patch 릴리스에서 경로 우선 순위의 계산이 변경 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-117">The computation of route precedence changed in the ASP.NET Core 5.0.1 patch release.</span></span> <span data-ttu-id="7720d-118">이는 선택적 매개 변수를 사용 하 여 모든 경로 또는 경로를 정의한 경우에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-118">This might affect you if you've defined catch-all routes or routes with optional parameters.</span></span>

### <a name="old-behavior"></a><span data-ttu-id="7720d-119">이전 동작</span><span class="sxs-lookup"><span data-stu-id="7720d-119">Old behavior</span></span>

<span data-ttu-id="7720d-120">이전 동작 ASP.NET Core 5.0.0 이전에는와 같이 우선 순위가 낮은 경로 `{*slug}` 는와 같이 우선 순위가 높은 경로 보다 먼저 일치 합니다 `/customer/{id}` .</span><span class="sxs-lookup"><span data-stu-id="7720d-120">With the prior behavior in ASP.NET Core 5.0.0 or earlier, routes with lower precedence, such as `{*slug}`, are matched before routes with higher precedence, such as `/customer/{id}`.</span></span>

### <a name="new-behavior"></a><span data-ttu-id="7720d-121">새 동작</span><span class="sxs-lookup"><span data-stu-id="7720d-121">New behavior</span></span>

<span data-ttu-id="7720d-122">ASP.NET Core 5.0.1 용 이상의 새 동작은 ASP.NET Core 앱에 정의 된 라우팅 동작과 더 밀접 하 게 일치 합니다. 여기서 프레임 워크는 각 세그먼트에 대해 먼저 경로 우선 순위를 계산 하 고 설정 하며 경로 길이만 사용 하 여 보조 조건으로 연결을 중단 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-122">The new behavior in ASP.NET Core 5.0.1 or later more closely matches the routing behavior defined in ASP.NET Core apps, where the framework computes and establishes the route precedence for each segment first and only uses the length of the route to break ties as a secondary criteria.</span></span>

### <a name="reason-for-change"></a><span data-ttu-id="7720d-123">변경 이유</span><span class="sxs-lookup"><span data-stu-id="7720d-123">Reason for change</span></span>

<span data-ttu-id="7720d-124">라우팅 Blazor 시스템이 라우팅을 통해 지원 되는 기능의 하위 집합에 대해 ASP.NET Core 라우팅 시스템과 동일한 방식으로 동작 하기 때문에 원래 동작은 구현에서 버그로 간주 됩니다 Blazor .</span><span class="sxs-lookup"><span data-stu-id="7720d-124">The original behavior is considered a bug in the implementation because our goal is for the Blazor routing system to behave in the same way as the ASP.NET Core routing system for the subset of features supported by Blazor routing.</span></span>

### <a name="recommended-action"></a><span data-ttu-id="7720d-125">권장 조치</span><span class="sxs-lookup"><span data-stu-id="7720d-125">Recommended action</span></span>

<span data-ttu-id="7720d-126">`PreferExactMatches` `Router` 파일의 구성 요소에 특성을 추가 `App.razor` 하 여 올바른 동작을 옵트인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-126">Add the `PreferExactMatches` attribute to the `Router` component in the `App.razor` file to opt into the correct behavior:</span></span>

```razor
<Router AppAssembly="@typeof(Program).Assembly" PreferExactMatches="true">
```

<span data-ttu-id="7720d-127">`PreferExactMatches`가로 설정 된 경우 `true` 경로 일치는 와일드 카드를 통한 정확한 일치를 선호 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-127">When `PreferExactMatches` is set to `true`, route matching prefers exact matches over wildcards.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7720d-128">모든 앱은 명시적으로로 설정 되어야 합니다 `PreferExactMatches` `true` .</span><span class="sxs-lookup"><span data-stu-id="7720d-128">All apps should explicitly set `PreferExactMatches` to `true`.</span></span>
>
> <span data-ttu-id="7720d-129">옵션을 기본값으로 설정 하거나 해제 하는 기능은 `false` `false` *이전 버전과의 호환성을 위해서만 제공 됩니다*.</span><span class="sxs-lookup"><span data-stu-id="7720d-129">The ability to set the option to `false` or leave it unset, which defaults the option to `false`, *is only provided for backward compatibility*.</span></span>
>
> <span data-ttu-id="7720d-130">.NET 6이 출시 되 면 라우터는 항상 정확히 일치 하는 것을 선호 하므로 `PreferExactMatches` 옵션을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-130">When .NET 6 is released, the router will always prefer exact matches, and the `PreferExactMatches` option won't be available.</span></span>

## <a name="update-no-locblazor-webassembly-and-no-locblazor-server-projects"></a><span data-ttu-id="7720d-131">업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트</span><span class="sxs-lookup"><span data-stu-id="7720d-131">Update Blazor WebAssembly and Blazor Server projects</span></span>

<span data-ttu-id="7720d-132">*이 단원의 지침은 두 호스팅 모델에 모두 적용 됩니다 Blazor . 이 섹션 뒤에 나오는 섹션에서는 호스팅 모델 및 앱 유형과 관련 한 추가 지침을 제공 합니다. 모든 관련 섹션의 지침을 앱에 적용 합니다.*</span><span class="sxs-lookup"><span data-stu-id="7720d-132">*The guidance in this section applies to both Blazor hosting models. Sections following this section provide additional guidance specific to hosting models and app types. Apply the guidance from all relevant sections to your app.*</span></span>

1. <span data-ttu-id="7720d-133">앱 또는 앱의에서 요소를 `wwwroot/index.html` Blazor WebAssembly `Pages/_Host.cshtml` Blazor Server `<link>` `<head>` 스타일에 대 한 요소에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-133">In `wwwroot/index.html` of a Blazor WebAssembly app or the `Pages/_Host.cshtml` of a Blazor Server app, add a `<link>` element to the `<head>` element for styles.</span></span> <span data-ttu-id="7720d-134">다음 `<link>` 요소 `href` 특성 값에서 자리 표시자는 `{ASSEMBLY NAME}` 응용 프로그램의 어셈블리 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-134">In the following `<link>` element `href` attribute values, the placeholder `{ASSEMBLY NAME}` is the app's assembly name.</span></span>

    ```diff
    +<link href="{ASSEMBLY NAME}.styles.css" rel="stylesheet" />
    ```
    
    <span data-ttu-id="7720d-135">독립 실행형 Blazor WebAssembly 또는 Blazor Server 예제:</span><span class="sxs-lookup"><span data-stu-id="7720d-135">Standalone Blazor WebAssembly or Blazor Server example:</span></span>
    
    ```diff
    +<link href="BlazorSample.styles.css" rel="stylesheet" />
    ```

    <span data-ttu-id="7720d-136">*`Client`* 호스팅된 솔루션의 프로젝트 Blazor WebAssembly 예제:</span><span class="sxs-lookup"><span data-stu-id="7720d-136">*`Client`* project of a hosted Blazor WebAssembly solution example:</span></span>
    
    ```diff
    +<link href="BlazorSample.Client.styles.css" rel="stylesheet" />
    ```

1. <span data-ttu-id="7720d-137">`_Imports.razor` [구성 요소 가상화](xref:blazor/components/virtualization)를 위해 앱의 파일에 새 네임 스페이스를 포함 <xref:Microsoft.AspNetCore.Components.Web.Virtualization?displayProperty=fullName> 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-137">Include a new namespace in the app's `_Imports.razor` file for [component virtualization](xref:blazor/components/virtualization), <xref:Microsoft.AspNetCore.Components.Web.Virtualization?displayProperty=fullName>.</span></span> <span data-ttu-id="7720d-138">다음 `_Imports.razor` 파일은 프로젝트 템플릿에서 생성 된 앱의 기본 네임 스페이스를 보여 줍니다 Blazor .</span><span class="sxs-lookup"><span data-stu-id="7720d-138">The following `_Imports.razor` files show the default namespaces in apps generated from the Blazor project templates.</span></span> <span data-ttu-id="7720d-139">자리 표시자는 `{ASSEMBLY NAME}` 응용 프로그램의 어셈블리 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-139">The placeholder `{ASSEMBLY NAME}` is the app's assembly name.</span></span>

   <span data-ttu-id="7720d-140">Blazor WebAssembly (`_Imports.razor`):</span><span class="sxs-lookup"><span data-stu-id="7720d-140">Blazor WebAssembly (`_Imports.razor`):</span></span>
   
   ```razor
   @using System.Net.Http
   @using System.Net.Http.Json
   @using Microsoft.AspNetCore.Components.Forms
   @using Microsoft.AspNetCore.Components.Routing
   @using Microsoft.AspNetCore.Components.Web
   @using Microsoft.AspNetCore.Components.Web.Virtualization
   @using Microsoft.AspNetCore.Components.WebAssembly.Http
   @using Microsoft.JSInterop
   @using {ASSEMBLY NAME}
   @using {ASSEMBLY NAME}.Shared
   ```

   <span data-ttu-id="7720d-141">Blazor Server (`_Imports.razor`):</span><span class="sxs-lookup"><span data-stu-id="7720d-141">Blazor Server (`_Imports.razor`):</span></span>
   
   ```razor
   @using System.Net.Http
   @using Microsoft.AspNetCore.Authorization
   @using Microsoft.AspNetCore.Components.Authorization
   @using Microsoft.AspNetCore.Components.Forms
   @using Microsoft.AspNetCore.Components.Routing
   @using Microsoft.AspNetCore.Components.Web
   @using Microsoft.AspNetCore.Components.Web.Virtualization
   @using Microsoft.JSInterop
   @using {ASSEMBLY NAME}
   @using {ASSEMBLY NAME}.Shared
   ```
   
1. <span data-ttu-id="7720d-142">`MainLayout`구성 요소 ( `Shared/MainLayout.razor` )에서 구성 요소의 HTML 태그를 `<div>` `class` 특성이로 설정 된 요소로 묶습니다 `page` .</span><span class="sxs-lookup"><span data-stu-id="7720d-142">In the `MainLayout` component (`Shared/MainLayout.razor`), surround the component's HTML markup with a `<div>` element that has a `class` attribute set to `page`:</span></span>

    ```razor
    <div class="page">
    
        ...
        
    </div>
    ```
    
1. <span data-ttu-id="7720d-143">폴더에 다음 파일을 추가 합니다 `Shared` .</span><span class="sxs-lookup"><span data-stu-id="7720d-143">Add the following files to the `Shared` folder:</span></span>

    <span data-ttu-id="7720d-144">`MainLayout.razor.css`:</span><span class="sxs-lookup"><span data-stu-id="7720d-144">`MainLayout.razor.css`:</span></span>
    
    ```css
    .page {
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .main {
        flex: 1;
    }

    .sidebar {
        background-image: linear-gradient(180deg, rgb(5, 39, 103) 0%, #3a0647 70%);
    }

    .top-row {
        background-color: #f7f7f7;
        border-bottom: 1px solid #d6d5d5;
        justify-content: flex-end;
        height: 3.5rem;
        display: flex;
        align-items: center;
    }

        .top-row ::deep a, .top-row .btn-link {
            white-space: nowrap;
            margin-left: 1.5rem;
        }

        .top-row a:first-child {
            overflow: hidden;
            text-overflow: ellipsis;
        }

    @media (max-width: 767.98px) {
        .top-row:not(.auth) {
            display: none;
        }

        .top-row.auth {
            justify-content: space-between;
        }

        .top-row a, .top-row .btn-link {
            margin-left: 0;
        }
    }

    @media (min-width: 768px) {
        .page {
            flex-direction: row;
        }

        .sidebar {
            width: 250px;
            height: 100vh;
            position: sticky;
            top: 0;
        }

        .top-row {
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .main > div {
            padding-left: 2rem !important;
            padding-right: 1.5rem !important;
        }
    }
    ```
    
    <span data-ttu-id="7720d-145">`NavMenu.razor.css`:</span><span class="sxs-lookup"><span data-stu-id="7720d-145">`NavMenu.razor.css`:</span></span>
    
    ```css
    .navbar-toggler {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .top-row {
        height: 3.5rem;
        background-color: rgba(0,0,0,0.4);
    }

    .navbar-brand {
        font-size: 1.1rem;
    }

    .oi {
        width: 2rem;
        font-size: 1.1rem;
        vertical-align: text-top;
        top: -2px;
    }

    .nav-item {
        font-size: 0.9rem;
        padding-bottom: 0.5rem;
    }

        .nav-item:first-of-type {
            padding-top: 1rem;
        }

        .nav-item:last-of-type {
            padding-bottom: 1rem;
        }

        .nav-item ::deep a {
            color: #d7d7d7;
            border-radius: 4px;
            height: 3rem;
            display: flex;
            align-items: center;
            line-height: 3rem;
        }

    .nav-item ::deep a.active {
        background-color: rgba(255,255,255,0.25);
        color: white;
    }

    .nav-item ::deep a:hover {
        background-color: rgba(255,255,255,0.1);
        color: white;
    }

    @media (min-width: 768px) {
        .navbar-toggler {
            display: none;
        }

        .collapse {
            /* Never collapse the sidebar for wide screens */
            display: block;
        }
    }
    ```

1. <span data-ttu-id="7720d-146">앱 또는 앱 `wwwroot/css/app.css` 파일의 최신 기본 파일에는 Blazor WebAssembly `wwwroot/css/site.css` Blazor Server 다음과 같은 스타일이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-146">The latest base `wwwroot/css/app.css` file of a Blazor WebAssembly app or `wwwroot/css/site.css` file of a Blazor Server app includes the following styles.</span></span> <span data-ttu-id="7720d-147">다음 스타일과 앱에 추가한 모든 스타일의 추가 스타일을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-147">Remove extra styles leaving the following styles and any that you've added to the app.</span></span>

    <span data-ttu-id="7720d-148">다음 스타일 시트에는 기본 스타일만 포함 되며 개발자가 추가한 사용자 지정 스타일은 포함 **되지** 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-148">The following stylesheet only includes base styles and does **not** include custom styles added by the developer:</span></span>
   
    ```css
    @import url('open-iconic/font/css/open-iconic-bootstrap.min.css');

    html, body {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }

    a, .btn-link {
        color: #0366d6;
    }

    .btn-primary {
        color: #fff;
        background-color: #1b6ec2;
        border-color: #1861ac;
    }

    .content {
        padding-top: 1.1rem;
    }

    .valid.modified:not([type=checkbox]) {
        outline: 1px solid #26b050;
    }

    .invalid {
        outline: 1px solid red;
    }

    .validation-message {
        color: red;
    }

    #blazor-error-ui {
        background: lightyellow;
        bottom: 0;
        box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2);
        display: none;
        left: 0;
        padding: 0.6rem 1.25rem 0.7rem 1.25rem;
        position: fixed;
        width: 100%;
        z-index: 1000;
    }

    #blazor-error-ui .dismiss {
        cursor: pointer;
        position: absolute;
        right: 0.75rem;
        top: 0.5rem;
    }
    ```

## <a name="update-no-locblazor-webassembly-projects"></a><span data-ttu-id="7720d-149">업데이트 Blazor WebAssembly 프로젝트</span><span class="sxs-lookup"><span data-stu-id="7720d-149">Update Blazor WebAssembly projects</span></span>

<span data-ttu-id="7720d-150">위의 [업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트](#update-blazor-webassembly-and-blazor-server-projects) 섹션의 지침을 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-150">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) section.</span></span>

<span data-ttu-id="7720d-151">Blazor WebAssembly호스팅된 솔루션의 프로젝트를 비롯 한 프로젝트의 경우 *`Client`* Blazor 프로젝트 파일에 다음 변경 내용을 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-151">For a Blazor WebAssembly project, including the *`Client`* project of a hosted Blazor solution, apply the following changes to the project file:</span></span>

1. <span data-ttu-id="7720d-152">SDK를에서로 업데이트 합니다 `Microsoft.NET.Sdk.Web` `Microsoft.NET.Sdk.BlazorWebAssembly` .</span><span class="sxs-lookup"><span data-stu-id="7720d-152">Update the SDK from `Microsoft.NET.Sdk.Web` to `Microsoft.NET.Sdk.BlazorWebAssembly`:</span></span>

    ```diff
    - <Project Sdk="Microsoft.NET.Sdk.Web">
    + <Project Sdk="Microsoft.NET.Sdk.BlazorWebAssembly">
    ```
    
    > [!NOTE]
    > <span data-ttu-id="7720d-153">이 업데이트는 독립 실행형 Blazor WebAssembly 프로젝트 및 *`Client`* 호스팅된 솔루션의 프로젝트에만 적용 됩니다 Blazor .</span><span class="sxs-lookup"><span data-stu-id="7720d-153">This update only applies to standalone Blazor WebAssembly projects and the *`Client`* projects of hosted Blazor solutions.</span></span>

1. <span data-ttu-id="7720d-154">다음 속성을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-154">Update the following properties:</span></span>

    ```diff
    <Project Sdk="Microsoft.NET.Sdk.BlazorWebAssembly">
    
      <PropertyGroup>
    -     <TargetFramework>netstandard2.1</TargetFramework>
    -     <RazorLangVersion>3.0</RazorLangVersion>
    +     <TargetFramework>net5.0</TargetFramework>
      </PropertyGroup>
    ```

1. <span data-ttu-id="7720d-155">AspNetCore에 대 한 패키지 참조를 제거 합니다. [빌드](https://www.nuget.org/packages/Microsoft.AspNetCore.Components.WebAssembly.Build):</span><span class="sxs-lookup"><span data-stu-id="7720d-155">Remove the package reference to [Microsoft.AspNetCore.Components.WebAssembly.Build](https://www.nuget.org/packages/Microsoft.AspNetCore.Components.WebAssembly.Build):</span></span>

    ```diff
    <ItemGroup>
    -    <PackageReference Include="Microsoft.AspNetCore.Components.WebAssembly.Build" Version="3.2.1" PrivateAssets="all" />
    ```

1. <span data-ttu-id="7720d-156">다른 패키지를 최신 버전으로 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-156">Update other packages to their latest versions.</span></span> <span data-ttu-id="7720d-157">최신 버전은 [NuGet.org](https://www.nuget.org)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-157">The latest versions can be found at [NuGet.org](https://www.nuget.org).</span></span>

1. <span data-ttu-id="7720d-158">에서 `wwwroot/index.html` 구성 요소를 로드 하는 요소를가 `App` `<div>` 로 설정 된 요소로 변경 합니다 `id` `app` .</span><span class="sxs-lookup"><span data-stu-id="7720d-158">In `wwwroot/index.html`, change the element that loads the `App` component to a `<div>` element with an `id` set to `app`:</span></span>
    
    ```diff
    -<app>Loading...</app>
    +<div id="app">Loading...</div>
    ```
    
1. <span data-ttu-id="7720d-159">`Program.Main`(`Program.cs`)에서:</span><span class="sxs-lookup"><span data-stu-id="7720d-159">In `Program.Main` (`Program.cs`):</span></span>

   * <span data-ttu-id="7720d-160">해시를 추가 하 여 요소에 대 한 참조를 `<app>` CSS 선택기로 변경 합니다 `#` .</span><span class="sxs-lookup"><span data-stu-id="7720d-160">Change the reference to the `<app>` element to a CSS selector by adding a hash `#` to it.</span></span>
   * <span data-ttu-id="7720d-161">등록을 범위가 지정 된로 변경 합니다 `HttpClient` .</span><span class="sxs-lookup"><span data-stu-id="7720d-161">Change the `HttpClient` registration to scoped.</span></span>

    ```diff
    -builder.RootComponents.Add<App>("app");
    +builder.RootComponents.Add<App>("#app");
    
    -builder.Services.AddTransient(sp => new HttpClient 
    -    { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });
    +builder.Services.AddScoped(sp => new HttpClient 
    +    { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });
    ```

### <a name="standalone-no-locblazor-webassembly-app-with-microsoft-accounts"></a><span data-ttu-id="7720d-162">Blazor WebAssemblyMicrosoft 계정을 사용 하는 독립 실행형 앱</span><span class="sxs-lookup"><span data-stu-id="7720d-162">Standalone Blazor WebAssembly app with Microsoft Accounts</span></span>

<span data-ttu-id="7720d-163">위의 [업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트](#update-blazor-webassembly-and-blazor-server-projects) 및 [업데이트 Blazor WebAssembly 프로젝트](#update-blazor-webassembly-projects) 섹션의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-163">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="7720d-164">Blazor WebAssemblyMicrosoft 계정에 대해 AAD (Azure Active Directory)를 사용 하기 위해 Azure Portal에 등록 된 독립 실행형 앱:</span><span class="sxs-lookup"><span data-stu-id="7720d-164">For a standalone Blazor WebAssembly app registered in the Azure portal to use Azure Active Directory (AAD) for Microsoft Accounts:</span></span>

* <span data-ttu-id="7720d-165">앱에는 `openid` 및 범위가 필요 합니다 `offline_access` .</span><span class="sxs-lookup"><span data-stu-id="7720d-165">The app requires the `openid` and `offline_access` scopes:</span></span>

  ```csharp
  options.ProviderOptions.DefaultAccessTokenScopes.Add("openid");
  options.ProviderOptions.DefaultAccessTokenScopes.Add("offline_access");
  ```
  
* <span data-ttu-id="7720d-166">Azure Portal 앱 등록 **인증** 블레이드에서 다음을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-166">In the Azure portal app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="7720d-167">**웹** 플랫폼 구성을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-167">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="7720d-168">앱의 리디렉션 URI를 사용 하 여 **단일 페이지 응용 프로그램** 플랫폼 구성을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-168">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="7720d-169">**액세스 토큰** 및 **ID 토큰** 에 대해 **암시적 허용** 을 사용 하지 않도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-169">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>

<span data-ttu-id="7720d-170">자세한 내용은 <xref:blazor/security/webassembly/standalone-with-microsoft-accounts>를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-170">For more information, see <xref:blazor/security/webassembly/standalone-with-microsoft-accounts>.</span></span>

### <a name="standalone-no-locblazor-webassembly-app-with-azure-active-directory-aad"></a><span data-ttu-id="7720d-171">Blazor WebAssemblyAzure Active Directory (AAD)를 사용 하는 독립 실행형 앱</span><span class="sxs-lookup"><span data-stu-id="7720d-171">Standalone Blazor WebAssembly app with Azure Active Directory (AAD)</span></span>

<span data-ttu-id="7720d-172">위의 [업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트](#update-blazor-webassembly-and-blazor-server-projects) 및 [업데이트 Blazor WebAssembly 프로젝트](#update-blazor-webassembly-projects) 섹션의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-172">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="7720d-173">Blazor WebAssemblyAAD (Azure Active Directory를 사용 하기 위해 Azure Portal에 등록 된 독립 실행형 앱:</span><span class="sxs-lookup"><span data-stu-id="7720d-173">For a standalone Blazor WebAssembly app registered in the Azure portal to use Azure Active Directory (AAD):</span></span>

* <span data-ttu-id="7720d-174">앱에는 범위가 필요 합니다 `https://graph.microsoft.com/User.Read` .</span><span class="sxs-lookup"><span data-stu-id="7720d-174">The app requires the `https://graph.microsoft.com/User.Read` scope:</span></span>

  ```csharp
  options.ProviderOptions.DefaultAccessTokenScopes
      .Add("https://graph.microsoft.com/User.Read");
  ```
  
* <span data-ttu-id="7720d-175">Azure Portal 앱 등록 **인증** 블레이드에서 다음을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-175">In the Azure portal app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="7720d-176">**웹** 플랫폼 구성을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-176">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="7720d-177">앱의 리디렉션 URI를 사용 하 여 **단일 페이지 응용 프로그램** 플랫폼 구성을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-177">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="7720d-178">**액세스 토큰** 및 **ID 토큰** 에 대해 **암시적 허용** 을 사용 하지 않도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-178">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>
  
<span data-ttu-id="7720d-179">자세한 내용은 <xref:blazor/security/webassembly/standalone-with-azure-active-directory>를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-179">For more information, see <xref:blazor/security/webassembly/standalone-with-azure-active-directory>.</span></span>

### <a name="standalone-no-locblazor-webassembly-app-with-azure-active-directory-aad-b2c"></a><span data-ttu-id="7720d-180">Blazor WebAssemblyAzure Active Directory (AAD)를 사용 하는 독립 실행형 앱 B2C</span><span class="sxs-lookup"><span data-stu-id="7720d-180">Standalone Blazor WebAssembly app with Azure Active Directory (AAD) B2C</span></span>

<span data-ttu-id="7720d-181">위의 [업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트](#update-blazor-webassembly-and-blazor-server-projects) 및 [업데이트 Blazor WebAssembly 프로젝트](#update-blazor-webassembly-projects) 섹션의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-181">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="7720d-182">Azure Portal에 등록 된 독립 실행형 앱의 경우 Blazor WebAssembly AAD (Azure Active Directory) B2C를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-182">For a standalone Blazor WebAssembly app registered in the Azure portal to use Azure Active Directory (AAD) B2C:</span></span>

* <span data-ttu-id="7720d-183">앱에는 `openid` 및 범위가 필요 합니다 `offline_access` .</span><span class="sxs-lookup"><span data-stu-id="7720d-183">The app requires the `openid` and `offline_access` scopes:</span></span>

  ```csharp
  options.ProviderOptions.DefaultAccessTokenScopes.Add("openid");
  options.ProviderOptions.DefaultAccessTokenScopes.Add("offline_access");
  ```
  
* <span data-ttu-id="7720d-184">Azure Portal 앱 등록 **인증** 블레이드에서 다음을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-184">In the Azure portal app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="7720d-185">**웹** 플랫폼 구성을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-185">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="7720d-186">앱의 리디렉션 URI를 사용 하 여 **단일 페이지 응용 프로그램** 플랫폼 구성을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-186">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="7720d-187">**액세스 토큰** 및 **ID 토큰** 에 대해 **암시적 허용** 을 사용 하지 않도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-187">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>

<span data-ttu-id="7720d-188">자세한 내용은 <xref:blazor/security/webassembly/standalone-with-azure-active-directory-b2c>를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-188">For more information, see <xref:blazor/security/webassembly/standalone-with-azure-active-directory-b2c>.</span></span>

### <a name="hosted-no-locblazor-webassembly-app-with-azure-active-directory-aad-or-aad-b2c"></a><span data-ttu-id="7720d-189">Blazor WebAssemblyAAD (Azure Active Directory) 또는 AAD B2C를 사용 하 여 호스팅된 앱</span><span class="sxs-lookup"><span data-stu-id="7720d-189">Hosted Blazor WebAssembly app with Azure Active Directory (AAD) or AAD B2C</span></span>

<span data-ttu-id="7720d-190">위의 [업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트](#update-blazor-webassembly-and-blazor-server-projects) 및 [업데이트 Blazor WebAssembly 프로젝트](#update-blazor-webassembly-projects) 섹션의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-190">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="7720d-191">*`Client`* Blazor 사용자 인증을 위해 AAD 또는 AAD B2C를 사용 하는 호스팅된 솔루션의 앱 등록에서는 **단일 페이지 응용 프로그램** Azure 앱 플랫폼 구성을 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-191">The *`Client`* app registration of a hosted Blazor solution that uses AAD or AAD B2C for user authentication should use a **Single-page application** Azure Apps platform configuration.</span></span>

<span data-ttu-id="7720d-192">Azure Portal *`Client`* 앱 등록 **인증** 블레이드에서 다음을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-192">In the Azure portal *`Client`* app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="7720d-193">**웹** 플랫폼 구성을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-193">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="7720d-194">앱의 리디렉션 URI를 사용 하 여 **단일 페이지 응용 프로그램** 플랫폼 구성을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-194">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="7720d-195">**액세스 토큰** 및 **ID 토큰** 에 대해 **암시적 허용** 을 사용 하지 않도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-195">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>

<span data-ttu-id="7720d-196">자세한 내용은 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-196">For more information, see:</span></span>

* <xref:blazor/security/webassembly/hosted-with-azure-active-directory>
* <xref:blazor/security/webassembly/hosted-with-azure-active-directory-b2c>

### <a name="update-the-server-project-of-a-hosted-no-locblazor-solution"></a><span data-ttu-id="7720d-197">호스팅된 솔루션의 서버 프로젝트를 업데이트 합니다. Blazor</span><span class="sxs-lookup"><span data-stu-id="7720d-197">Update the Server project of a hosted Blazor solution</span></span>

<span data-ttu-id="7720d-198">이전 섹션의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-198">Follow the guidance in the preceding sections:</span></span>

* [<span data-ttu-id="7720d-199">업데이트 Blazor WebAssembly 및 Blazor Server 프로젝트</span><span class="sxs-lookup"><span data-stu-id="7720d-199">Update Blazor WebAssembly and Blazor Server projects</span></span>](#update-blazor-webassembly-and-blazor-server-projects)
* [<span data-ttu-id="7720d-200">업데이트 Blazor WebAssembly 프로젝트</span><span class="sxs-lookup"><span data-stu-id="7720d-200">Update Blazor WebAssembly projects</span></span>](#update-blazor-webassembly-projects)
* <span data-ttu-id="7720d-201">Azure Active Directory를 사용 하 여 앱의 공급자에 적용 되는 섹션입니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-201">The section that applies to the app's provider with Azure Active Directory:</span></span>
  * [<span data-ttu-id="7720d-202">Blazor WebAssemblyMicrosoft 계정을 사용 하는 독립 실행형 앱</span><span class="sxs-lookup"><span data-stu-id="7720d-202">Standalone Blazor WebAssembly app with Microsoft Accounts</span></span>](#standalone-blazor-webassembly-app-with-microsoft-accounts)
  * [<span data-ttu-id="7720d-203">Blazor WebAssemblyAzure Active Directory (AAD)를 사용 하는 독립 실행형 앱</span><span class="sxs-lookup"><span data-stu-id="7720d-203">Standalone Blazor WebAssembly app with Azure Active Directory (AAD)</span></span>](#standalone-blazor-webassembly-app-with-azure-active-directory-aad)
  * [<span data-ttu-id="7720d-204">Blazor WebAssemblyAzure Active Directory (AAD)를 사용 하는 독립 실행형 앱 B2C</span><span class="sxs-lookup"><span data-stu-id="7720d-204">Standalone Blazor WebAssembly app with Azure Active Directory (AAD) B2C</span></span>](#standalone-blazor-webassembly-app-with-azure-active-directory-aad-b2c)

<span data-ttu-id="7720d-205">*`Server`* Blazor 이 문서의 일반 지침에 따라 호스팅된 솔루션의 프로젝트를 ASP.NET Core 앱으로 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-205">Update the *`Server`* project of a hosted Blazor solution as an ASP.NET Core app following the general guidance in this article.</span></span>

<span data-ttu-id="7720d-206">또한 *`Server`* Blazor WebAssembly AAD (Azure Active Directory) 또는 B2C를 사용 하 여 클라이언트 앱에 대해 사용자를 인증 하는 프로젝트는 새로운 Microsoft v2.0 패키지를 채택 해야 합니다 Identity .</span><span class="sxs-lookup"><span data-stu-id="7720d-206">Additionally, *`Server`* projects that authenticate users to client Blazor WebAssembly apps with Azure Active Directory (AAD) or B2C should adopt new Microsoft Identity v2.0 packages:</span></span> 
  
<span data-ttu-id="7720d-207">AAD의 경우:</span><span class="sxs-lookup"><span data-stu-id="7720d-207">For AAD:</span></span>

```diff
-<PackageReference Include="Microsoft.AspNetCore.Authentication.AzureAD.UI" Version="..." />
+<PackageReference Include="Microsoft.Identity.Web" Version="{VERSION}" />
+<PackageReference Include="Microsoft.Identity.Web.UI" Version="{VERSION}" />
```

<span data-ttu-id="7720d-208">AAD B2C:</span><span class="sxs-lookup"><span data-stu-id="7720d-208">For AAD B2C:</span></span>

```diff
-<PackageReference Include="Microsoft.AspNetCore.Authentication.AzureADB2C.UI" Version="..." />
+<PackageReference Include="Microsoft.Identity.Web" Version="{VERSION}" />
+<PackageReference Include="Microsoft.Identity.Web.UI" Version="{VERSION}" />
```

<span data-ttu-id="7720d-209">위의 패키지 참조에 대해 NuGet.org의 자리 표시자에 대 한 패키지 버전을 확인 합니다 `{VERSION}` .</span><span class="sxs-lookup"><span data-stu-id="7720d-209">For the preceding package references, determine the package versions for the `{VERSION}` placeholders at NuGet.org:</span></span>

* [`Microsoft.Identity.Web`](https://www.nuget.org/packages/Microsoft.Identity.Web)
* [`Microsoft.Identity.Web.UI`](https://www.nuget.org/packages/Microsoft.Identity.Web.UI)

> [!NOTE]
> <span data-ttu-id="7720d-210">*`Server`* 호스팅된 솔루션에서 프로젝트의 SDK는 Blazor WebAssembly 다음을 유지 합니다 `Microsoft.NET.Sdk.Web` .</span><span class="sxs-lookup"><span data-stu-id="7720d-210">The SDK of the *`Server`* project in a hosted Blazor WebAssembly solution remains `Microsoft.NET.Sdk.Web`:</span></span>
>
> ```xml
> <Project Sdk="Microsoft.NET.Sdk.Web">
> ```

<span data-ttu-id="7720d-211">자세한 내용은 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-211">For more information, see:</span></span>

* <xref:blazor/security/webassembly/hosted-with-azure-active-directory>
* <xref:blazor/security/webassembly/hosted-with-azure-active-directory-b2c>

### <a name="clean-and-rebuild-the-solution"></a><span data-ttu-id="7720d-212">솔루션 정리 및 다시 빌드</span><span class="sxs-lookup"><span data-stu-id="7720d-212">Clean and rebuild the solution</span></span>

<span data-ttu-id="7720d-213">앱 또는 솔루션을 .NET 5로 마이그레이션한 후에는 앱 이나 솔루션을 정리 하 고 다시 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-213">After migrating the app or solution to .NET 5, clean and rebuild the app or solution.</span></span> <span data-ttu-id="7720d-214">새 패키지 참조와 캐시 된 패키지 간에 패키지가 호환 되지 않는 경우:</span><span class="sxs-lookup"><span data-stu-id="7720d-214">If package incompatibilities exist between new package references and cached packages:</span></span>

1. <span data-ttu-id="7720d-215">명령 셸에서 다음 명령을 실행 하 여 NuGet 패키지 캐시를 지웁니다 [`dotnet nuget locals`](/dotnet/core/tools/dotnet-nuget-locals) .</span><span class="sxs-lookup"><span data-stu-id="7720d-215">Clear NuGet package caches by executing the following [`dotnet nuget locals`](/dotnet/core/tools/dotnet-nuget-locals) command in a command shell:</span></span>

   ```dotnetcli
   dotnet nuget locals --clear all
   ```
   
1. <span data-ttu-id="7720d-216">앱 또는 솔루션을 정리 하 고 다시 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-216">Clean and rebuild the app or solution.</span></span>

### <a name="troubleshoot"></a><span data-ttu-id="7720d-217">문제 해결</span><span class="sxs-lookup"><span data-stu-id="7720d-217">Troubleshoot</span></span>

<span data-ttu-id="7720d-218">앱에 적용 되는 보안 항목의 끝에 있는 *문제 해결* 지침을 따릅니다 Blazor WebAssembly .</span><span class="sxs-lookup"><span data-stu-id="7720d-218">Follow the *Troubleshoot* guidance at the end of the Blazor WebAssembly security topic that applies to your app:</span></span>

<span data-ttu-id="7720d-219">독립 실행형 Blazor WebAssembly 앱:</span><span class="sxs-lookup"><span data-stu-id="7720d-219">Standalone Blazor WebAssembly apps:</span></span>

* [<span data-ttu-id="7720d-220">OIDC 공급자 및 WebAssembly 인증 라이브러리에 대한 일반 지침</span><span class="sxs-lookup"><span data-stu-id="7720d-220">General guidance for OIDC providers and the WebAssembly Authentication Library</span></span>](xref:blazor/security/webassembly/standalone-with-authentication-library)
* [<span data-ttu-id="7720d-221">Microsoft 계정</span><span class="sxs-lookup"><span data-stu-id="7720d-221">Microsoft Accounts</span></span>](xref:blazor/security/webassembly/standalone-with-microsoft-accounts)
* [<span data-ttu-id="7720d-222">AAD(Azure Active Directory)</span><span class="sxs-lookup"><span data-stu-id="7720d-222">Azure Active Directory (AAD)</span></span>](xref:blazor/security/webassembly/standalone-with-azure-active-directory)
* [<span data-ttu-id="7720d-223">AAD(Azure Active Directory) B2C</span><span class="sxs-lookup"><span data-stu-id="7720d-223">Azure Active Directory (AAD) B2C</span></span>](xref:blazor/security/webassembly/standalone-with-azure-active-directory-b2c)

<span data-ttu-id="7720d-224">호스트된 Blazor WebAssembly 앱:</span><span class="sxs-lookup"><span data-stu-id="7720d-224">Hosted Blazor WebAssembly apps:</span></span>

* [<span data-ttu-id="7720d-225">AAD(Azure Active Directory)</span><span class="sxs-lookup"><span data-stu-id="7720d-225">Azure Active Directory (AAD)</span></span>](xref:blazor/security/webassembly/hosted-with-azure-active-directory)
* [<span data-ttu-id="7720d-226">AAD(Azure Active Directory) B2C</span><span class="sxs-lookup"><span data-stu-id="7720d-226">Azure Active Directory (AAD) B2C</span></span>](xref:blazor/security/webassembly/hosted-with-azure-active-directory-b2c)
* [<span data-ttu-id="7720d-227">Identity서버</span><span class="sxs-lookup"><span data-stu-id="7720d-227">Identity Server</span></span>](xref:blazor/security/webassembly/hosted-with-identity-server)

### <a name="unauthorized-client-for-azure-active-directory-aad"></a><span data-ttu-id="7720d-228">AAD (권한 없는 클라이언트 Azure Active Directory)</span><span class="sxs-lookup"><span data-stu-id="7720d-228">Unauthorized client for Azure Active Directory (AAD)</span></span>

<span data-ttu-id="7720d-229">Blazor WebAssembly인증을 위해 aad를 사용 하는 앱을 업그레이드 한 후 사용자가 aad를 사용 하 여 로그인 한 후 앱에 대 한 로그인 콜백에 다음과 같은 오류가 나타날 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-229">After upgrading a Blazor WebAssembly app that uses AAD for authentication, you may receive the following error on the login callback to the app after the user signs in with AAD:</span></span>

> <span data-ttu-id="7720d-230">정보: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[2] 권한 부여에 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-230">info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[2] Authorization failed.</span></span> <span data-ttu-id="7720d-231">다음 요구 사항이 충족되지 않았습니다. DenyAnonymousAuthorizationRequirement: 인증된 사용자가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-231">These requirements were not met: DenyAnonymousAuthorizationRequirement: Requires an authenticated user.</span></span>

<span data-ttu-id="7720d-232">AAD에서 로그인 콜백 오류:</span><span class="sxs-lookup"><span data-stu-id="7720d-232">Login callback error from AAD:</span></span>

* <span data-ttu-id="7720d-233">오류: `unauthorized_client`</span><span class="sxs-lookup"><span data-stu-id="7720d-233">Error: `unauthorized_client`</span></span>
* <span data-ttu-id="7720d-234">설명: `AADB2C90058: The provided application is not configured to allow public clients.`</span><span class="sxs-lookup"><span data-stu-id="7720d-234">Description: `AADB2C90058: The provided application is not configured to allow public clients.`</span></span>

<span data-ttu-id="7720d-235">오류를 해결하려면:</span><span class="sxs-lookup"><span data-stu-id="7720d-235">To resolve the error:</span></span>

1. <span data-ttu-id="7720d-236">Azure Portal에서 [앱의 매니페스트](/azure/active-directory/develop/reference-app-manifest)에 액세스합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-236">In the Azure portal, access the [app's manifest](/azure/active-directory/develop/reference-app-manifest).</span></span>
1. <span data-ttu-id="7720d-237">[`allowPublicClient`](/azure/active-directory/develop/reference-app-manifest#allowpublicclient-attribute) 특성을 `null` 또는 `true`로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-237">Set the [`allowPublicClient`](/azure/active-directory/develop/reference-app-manifest#allowpublicclient-attribute) attribute to `null` or `true`.</span></span>

## <a name="update-a-no-locblazor-progressive-web-application-pwa"></a><span data-ttu-id="7720d-238">Blazor프로그레시브 웹 응용 프로그램 업데이트 (PWA)</span><span class="sxs-lookup"><span data-stu-id="7720d-238">Update a Blazor Progressive Web Application (PWA)</span></span>

<span data-ttu-id="7720d-239">PWA 앱의 프로젝트 파일에 다음 항목을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-239">Add the following item to the PWA app's project file:</span></span>

```xml
<ItemGroup>
  <ServiceWorker Include="wwwroot\service-worker.js" 
    PublishedContent="wwwroot\service-worker.published.js" />
</ItemGroup>
```

## <a name="update-no-locrazor-class-libraries-rcls"></a><span data-ttu-id="7720d-240">Razor클래스 라이브러리 업데이트 (RCLs)</span><span class="sxs-lookup"><span data-stu-id="7720d-240">Update Razor class libraries (RCLs)</span></span>

<span data-ttu-id="7720d-241">RazorASP.NET Core 5.0의 일부로 도입 된 새로운 api 또는 기능을 활용 하려면 RCLs (클래스 라이브러리)를 마이그레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-241">Migrate Razor class libraries (RCLs) to take advantage of new APIs or features that are introduced as part of ASP.NET Core 5.0.</span></span> 

<span data-ttu-id="7720d-242">구성 요소를 대상으로 하는 RCL을 업데이트 하려면:</span><span class="sxs-lookup"><span data-stu-id="7720d-242">To update a RCL that targets components:</span></span>

1. <span data-ttu-id="7720d-243">프로젝트 파일에서 다음 속성을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-243">Update the following properties in the project file:</span></span>

   ```diff
   <Project Sdk="Microsoft.NET.Sdk.Razor">
    
     <PropertyGroup>
   -     <TargetFramework>netstandard2.0</TargetFramework>
   -     <RazorLangVersion>3.0</RazorLangVersion>
   +     <TargetFramework>net5.0</TargetFramework>
     </PropertyGroup>
   ```

1. <span data-ttu-id="7720d-244">다른 패키지를 최신 버전으로 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-244">Update other packages to their latest versions.</span></span> <span data-ttu-id="7720d-245">최신 버전은 [NuGet.org](https://www.nuget.org)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-245">The latest versions can be found at [NuGet.org](https://www.nuget.org).</span></span>

<span data-ttu-id="7720d-246">RCL 대상 지정 MVC를 업데이트 하려면 프로젝트 파일에서 다음 속성을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-246">To update an RCL targeting MVC, update the following properties in the project file:</span></span>

```diff
<Project Sdk="Microsoft.NET.Sdk.Razor">

  <PropertyGroup>
-    <TargetFramework>netcoreapp3.1</TargetFramework>
+    <TargetFramework>net5.0</TargetFramework>
    <AddRazorSupportForMvc>true</AddRazorSupportForMvc>
  </PropertyGroup>
```

## <a name="update-package-references"></a><span data-ttu-id="7720d-247">패키지 참조 업데이트</span><span class="sxs-lookup"><span data-stu-id="7720d-247">Update package references</span></span>

<span data-ttu-id="7720d-248">프로젝트 파일에서 패키지 참조의 특성 [에 대](https://www.nuget.org/packages/System.Net.Http.Json) 한 각 [AspNetCore. \*](https://www.nuget.org/packages?q=Microsoft.AspNetCore.*), [microsoft.entityframeworkcore.tools.dotnet.](https://www.nuget.org/packages?q=Microsoft.EntityFrameworkCore.*) [\*,](https://www.nuget.org/packages?q=Microsoft.Extensions.*)5.0.0 및System.Net.Http.Js를 `Version` 이상으로 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-248">In the project file, update each [Microsoft.AspNetCore.\*](https://www.nuget.org/packages?q=Microsoft.AspNetCore.*), [Microsoft.EntityFrameworkCore.\*](https://www.nuget.org/packages?q=Microsoft.EntityFrameworkCore.*), [Microsoft.Extensions.\*](https://www.nuget.org/packages?q=Microsoft.Extensions.*), and [System.Net.Http.Json](https://www.nuget.org/packages/System.Net.Http.Json) package reference's `Version` attribute to 5.0.0 or later.</span></span> <span data-ttu-id="7720d-249">예:</span><span class="sxs-lookup"><span data-stu-id="7720d-249">For example:</span></span>

```diff
<ItemGroup>
-    <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="3.1.6" />
-    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="3.1.6">
-    <PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="3.1.6" />
-    <PackageReference Include="System.Net.Http.Json" Version="3.2.1" />
+    <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="5.0.0" />
+    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="5.0.0">
+    <PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="5.0.0" />
+    <PackageReference Include="System.Net.Http.Json" Version="5.0.0" />
</ItemGroup>
```

## <a name="update-docker-images"></a><span data-ttu-id="7720d-250">Docker 이미지 업데이트</span><span class="sxs-lookup"><span data-stu-id="7720d-250">Update Docker images</span></span>

<span data-ttu-id="7720d-251">Docker를 사용 하는 앱의 경우 *Dockerfile* `FROM` 문과 스크립트를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-251">For apps using Docker, update your *Dockerfile* `FROM` statements and scripts.</span></span> <span data-ttu-id="7720d-252">ASP.NET Core 5.0 런타임을 포함 하는 기본 이미지를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-252">Use a base image that includes the ASP.NET Core 5.0 runtime.</span></span> <span data-ttu-id="7720d-253">`docker pull`ASP.NET Core 3.1과 5.0 사이의 다음 명령 차이를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-253">Consider the following `docker pull` command difference between ASP.NET Core 3.1 and 5.0:</span></span>

```diff
- docker pull mcr.microsoft.com/dotnet/core/aspnet:3.1
+ docker pull mcr.microsoft.com/dotnet/aspnet:5.0
```

<span data-ttu-id="7720d-254">제품 이름으로 ".NET"으로 이동 하는 과정에서 Docker 이미지는 `mcr.microsoft.com/dotnet/core` 리포지토리에서로 이동 `mcr.microsoft.com/dotnet` 했습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-254">As part of the move to ".NET" as the product name, the Docker images moved from the `mcr.microsoft.com/dotnet/core` repositories to `mcr.microsoft.com/dotnet`.</span></span> <span data-ttu-id="7720d-255">자세한 내용은 [dotnet/dotnet-docker # 1939](https://github.com/dotnet/dotnet-docker/issues/1939)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-255">For more information, see [dotnet/dotnet-docker#1939](https://github.com/dotnet/dotnet-docker/issues/1939).</span></span>

## <a name="model-binding-changes-in-aspnet-core-mvc-and-no-locrazor-pages"></a><span data-ttu-id="7720d-256">MVC 및 페이지 ASP.NET Core의 모델 바인딩 변경 내용 Razor</span><span class="sxs-lookup"><span data-stu-id="7720d-256">Model binding changes in ASP.NET Core MVC and Razor Pages</span></span>

### <a name="datetime-values-are-model-bound-as-utc-times"></a><span data-ttu-id="7720d-257">DateTime 값이 UTC 시간으로 바인딩된 모델입니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-257">DateTime values are model bound as UTC times</span></span>

<span data-ttu-id="7720d-258">ASP.NET Core 3.1 이전 버전에서 `DateTime` 값은 로컬 시간으로 모델에 바인딩되고, 여기서 표준 시간대는 서버에 의해 결정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-258">In ASP.NET Core 3.1 and earlier, `DateTime` values were model-bound as local time, where the timezone was determined by the server.</span></span> <span data-ttu-id="7720d-259">`DateTime` JSON (입력 형식) 및 값에서 바인딩된 값 `DateTimeOffset` 은 UTC timezones로 바인딩 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-259">`DateTime` values bound from input formatting (JSON) and `DateTimeOffset` values were bound as UTC timezones.</span></span>

<span data-ttu-id="7720d-260">ASP.NET Core 5.0 이상에서 모델 바인딩은 `DateTime` UTC 표준 시간대를 사용 하 여 값을 일관 되 게 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-260">In ASP.NET Core 5.0 and later, model binding consistently binds `DateTime` values with the UTC timezone.</span></span>

<span data-ttu-id="7720d-261">이전 동작을 유지 하려면에서을 제거 `DateTimeModelBinderProvider` 합니다 `Startup.ConfigureServices` .</span><span class="sxs-lookup"><span data-stu-id="7720d-261">To retain the previous behavior, remove the `DateTimeModelBinderProvider` in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddControllersWithViews(options => 
    options.ModelBinderProviders.RemoveType<DateTimeModelBinderProvider>());
```

### <a name="complexobjectmodelbinderprovider--complexobjectmodelbinder-replace-complextypemodelbinderprovider--complextypemodelbinder"></a><span data-ttu-id="7720d-262">ComplexObjectModelBinderProvider \ ComplexObjectModelBinder replace ComplexTypeModelBinderProvider \ ComplexTypeModelBinder</span><span class="sxs-lookup"><span data-stu-id="7720d-262">ComplexObjectModelBinderProvider \ ComplexObjectModelBinder replace ComplexTypeModelBinderProvider \ ComplexTypeModelBinder</span></span>

<span data-ttu-id="7720d-263">모델 바인딩 [c # 9 레코드 형식](/dotnet/csharp/whats-new/csharp-9#record-types)에 대 한 지원을 추가 하려면는 <xref:Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider> 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-263">To add support for model binding [C# 9 record types](/dotnet/csharp/whats-new/csharp-9#record-types), the <xref:Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider> is:</span></span>

* <span data-ttu-id="7720d-264">사용 되지 않는 것으로 주석이 추가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-264">Annotated as obsolete.</span></span>
* <span data-ttu-id="7720d-265">더 이상 기본적으로 등록 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-265">No longer registered by default.</span></span>

<span data-ttu-id="7720d-266">컬렉션에의 존재를 사용 하는 앱은 `ComplexTypeModelBinderProvider` `ModelBinderProviders` 새 바인더 공급자를 참조 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-266">Apps that rely on the presence of the `ComplexTypeModelBinderProvider` in the `ModelBinderProviders` collection need to reference the new binder provider:</span></span>

```diff
- var complexModelBinderProvider = options.ModelBinderProviders.OfType<ComplexTypeModelBinderProvider>();
+ var complexModelBinderProvider = options.ModelBinderProviders.OfType<ComplexObjectModelBinderProvider>();
```

## <a name="review-breaking-changes"></a><span data-ttu-id="7720d-267">주요 변경 내용 검토</span><span class="sxs-lookup"><span data-stu-id="7720d-267">Review breaking changes</span></span>

<span data-ttu-id="7720d-268">.NET Core 3.1에서 .NET 5.0으로의 주요 변경 내용은 [버전 3.1에서 5.0로 마이그레이션에 대 한 주요](/dotnet/core/compatibility/3.1-5.0)변경 내용을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7720d-268">For breaking changes from .NET Core 3.1 to .NET 5.0, see [Breaking changes for migration from version 3.1 to 5.0](/dotnet/core/compatibility/3.1-5.0).</span></span> <span data-ttu-id="7720d-269">ASP.NET Core 및 Entity Framework Core 목록에도 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7720d-269">ASP.NET Core and Entity Framework Core are also included in the list.</span></span>
